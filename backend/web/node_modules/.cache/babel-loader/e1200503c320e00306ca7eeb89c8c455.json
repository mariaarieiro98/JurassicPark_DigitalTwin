{"ast":null,"code":"var _jsxFileName = \"/media/maria/96ae9a87-ebe3-48cb-a2c1-fae5fe76b9e7/maria/Marketplace-JurassicPark/backend/web/src/components/templates/Table/JPTable.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from 'react';\nimport { withStyles, createStyles, makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { Box, Button } from '@material-ui/core';\nimport { ArrowDropUp, ArrowDropDown, Delete, Edit, AddBoxOutlined, Settings } from '@material-ui/icons';\nimport FlashOnOutlinedIcon from '@material-ui/icons/FlashOnOutlined';\nimport { useMountEffect } from '../../../utils/main';\nimport { useGlobalStyles } from '../../../styles/main';\nimport './JPTable.css';\nimport { ConfirmActionStateLabel, ConfirmAction } from '../ConfirmAction/ConfirmAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledTableCell = withStyles(theme => createStyles({\n  head: {\n    color: theme.palette.primary.main,\n    fontWeight: 'bold',\n    fontSize: 16\n  },\n  body: {\n    fontSize: 12,\n    alignContent: 'center'\n  }\n}))(TableCell);\nconst StyledTableRow = withStyles(theme => createStyles({\n  root: {\n    '&:nth-of-type(odd)': {\n      backgroundColor: theme.palette.background.default\n    }\n  }\n}))(TableRow);\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 700\n  },\n  tableHeader: {\n    cursor: 'pointer'\n  }\n});\nexport const JPTable = props => {\n  _s();\n\n  var _props$extra6, _props$extra7, _props$extra7$delete, _props$extra8, _props$extra9, _props$extra9$delete, _props$extra10, _props$extra11, _props$extra11$delete;\n\n  const classes = useStyles();\n  const globalClasses = useGlobalStyles();\n  const [orderBy, setOrderBy] = useState('');\n  const [previousOrderBy, setPreviousOrderBy] = useState('');\n  const [asc, setAsc] = useState(false);\n  const [deleting, setDeleting] = useState(undefined);\n\n  const sort = criteria => {\n    if (!props.data.length) return; // const criteria = props.indexes[criteriaIndex].key\n\n    let newAsc = true;\n    const sorted = [...props.data.sort((a, b) => {\n      var _a$criteria$key, _b$criteria$key;\n\n      let elementA = (_a$criteria$key = a[criteria].key) !== null && _a$criteria$key !== void 0 ? _a$criteria$key : a[criteria];\n      let elementB = (_b$criteria$key = b[criteria].key) !== null && _b$criteria$key !== void 0 ? _b$criteria$key : b[criteria];\n\n      if (typeof a[criteria] === 'string') {\n        var _a$criteria$key2, _b$criteria$key2;\n\n        elementA = ((_a$criteria$key2 = a[criteria].key) !== null && _a$criteria$key2 !== void 0 ? _a$criteria$key2 : a[criteria]).toLocaleLowerCase();\n        elementB = ((_b$criteria$key2 = b[criteria].key) !== null && _b$criteria$key2 !== void 0 ? _b$criteria$key2 : b[criteria]).toLocaleLowerCase();\n      }\n\n      const greater = elementA >= elementB;\n      const equal = elementA === elementB;\n      if (criteria === orderBy) newAsc = !asc;\n      return equal ? 0 : newAsc ? greater ? 1 : -1 : greater ? -1 : 1;\n    })];\n    setPreviousOrderBy(orderBy);\n    setOrderBy(criteria);\n    setAsc(newAsc);\n    props.updateData(sorted);\n  };\n\n  useMountEffect(() => sort(props.sortedkey ? props.sortedkey : props.indexes[0].key));\n  const setDeletingElement = useCallback(element => () => setDeleting(element), []);\n\n  const triggerEditElement = element => () => props.extra && props.extra.edit ? props.extra.edit.action(element) : {};\n\n  const triggerDetailsElement = element => () => props.extra && props.extra.details ? props.extra.details.action(element) : {};\n\n  const triggerAddElement = element => () => props.extra && props.extra.add ? props.extra.add.action(element) : {};\n\n  const triggerButtonElement = element => () => props.extra && props.extra.trigger_button ? props.extra.trigger_button.action(element) : {};\n\n  const deleteLine = useCallback(() => {\n    return new Promise((res, rej) => {\n      var _props$extra;\n\n      if (!((_props$extra = props.extra) === null || _props$extra === void 0 ? void 0 : _props$extra.delete) || !deleting) {\n        rej('');\n        return;\n      }\n\n      props.extra.delete.action(deleting).then(_ => {\n        var _props$extra2, _props$extra3, _props$extra3$delete;\n\n        res(`Correctly deleted ${props.tName} \\n${deleting && ((_props$extra2 = props.extra) === null || _props$extra2 === void 0 ? void 0 : _props$extra2.delete) ? deleting[(_props$extra3 = props.extra) === null || _props$extra3 === void 0 ? void 0 : (_props$extra3$delete = _props$extra3.delete) === null || _props$extra3$delete === void 0 ? void 0 : _props$extra3$delete.labelKey] : ''}.`);\n      }).catch(_ => {\n        var _props$extra4, _props$extra5, _props$extra5$delete;\n\n        rej(`Error deleting ${props.tName} \\n${deleting && ((_props$extra4 = props.extra) === null || _props$extra4 === void 0 ? void 0 : _props$extra4.delete) ? deleting[(_props$extra5 = props.extra) === null || _props$extra5 === void 0 ? void 0 : (_props$extra5$delete = _props$extra5.delete) === null || _props$extra5$delete === void 0 ? void 0 : _props$extra5$delete.labelKey] : ''}.`);\n      });\n    });\n  }, [deleting, props.extra, props.tName]);\n  const confirmActionStatesToRemove = {\n    start: {\n      label: `Delete ${props.tName} \\n${deleting && ((_props$extra6 = props.extra) === null || _props$extra6 === void 0 ? void 0 : _props$extra6.delete) ? deleting[(_props$extra7 = props.extra) === null || _props$extra7 === void 0 ? void 0 : (_props$extra7$delete = _props$extra7.delete) === null || _props$extra7$delete === void 0 ? void 0 : _props$extra7$delete.labelKey] : ''}?`,\n      positiveLabel: 'Yes',\n      negativeLabel: 'No',\n      state: ConfirmActionStateLabel.start\n    },\n    executing: {\n      label: '',\n      state: ConfirmActionStateLabel.executing\n    },\n    success: {\n      label: `Correctly deleted ${props.tName} \\n${deleting && ((_props$extra8 = props.extra) === null || _props$extra8 === void 0 ? void 0 : _props$extra8.delete) ? deleting[(_props$extra9 = props.extra) === null || _props$extra9 === void 0 ? void 0 : (_props$extra9$delete = _props$extra9.delete) === null || _props$extra9$delete === void 0 ? void 0 : _props$extra9$delete.labelKey] : ''}.`,\n      state: ConfirmActionStateLabel.success,\n      positiveLabel: 'Ok'\n    },\n    error: {\n      label: `Error deleting ${props.tName} \\n${deleting && ((_props$extra10 = props.extra) === null || _props$extra10 === void 0 ? void 0 : _props$extra10.delete) ? deleting[(_props$extra11 = props.extra) === null || _props$extra11 === void 0 ? void 0 : (_props$extra11$delete = _props$extra11.delete) === null || _props$extra11$delete === void 0 ? void 0 : _props$extra11$delete.labelKey] : ''}.`,\n      state: ConfirmActionStateLabel.error,\n      positiveLabel: 'Ok'\n    }\n  };\n\n  const onCancel = () => setDeleting(undefined);\n\n  const onError = () => setDeleting(undefined);\n\n  const onSuccess = () => {\n    var _props$extra12, _props$extra12$delete;\n\n    props.updateData(props.data.filter(cElement => cElement !== deleting));\n    if (deleting) (_props$extra12 = props.extra) === null || _props$extra12 === void 0 ? void 0 : (_props$extra12$delete = _props$extra12.delete) === null || _props$extra12$delete === void 0 ? void 0 : _props$extra12$delete.onSuccessDelete(deleting);\n  };\n\n  const confirmActionPropsDeleting = {\n    title: `Deleting ${props.tName}`,\n    states: confirmActionStatesToRemove,\n    currentState: confirmActionStatesToRemove.start,\n    onCancel: onCancel,\n    onError: onError,\n    onSuccess: onSuccess,\n    action: deleteLine\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [deleting ? /*#__PURE__*/_jsxDEV(ConfirmAction, { ...confirmActionPropsDeleting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }, this) : null, /*#__PURE__*/_jsxDEV(TableContainer, {\n      component: Paper,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        className: classes.table,\n        size: \"small\",\n        \"aria-label\": \"customized table\",\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [props.indexes.map((element, index) => /*#__PURE__*/_jsxDEV(StyledTableCell, {\n              className: classes.tableHeader,\n              onClick: () => sort(element.key),\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                className: globalClasses.hoverOpacity,\n                display: \"flex\",\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                children: [element.label, element.key === orderBy ? asc ? /*#__PURE__*/_jsxDEV(ArrowDropUp, {\n                  className: previousOrderBy === orderBy ? \"arrow-up\" : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 68\n                }, this) : /*#__PURE__*/_jsxDEV(ArrowDropDown, {\n                  className: element.key === orderBy ? \"arrow-down\" : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 143\n                }, this) : /*#__PURE__*/_jsxDEV(ArrowDropUp, {\n                  className: `${globalClasses.hiddenHoverOpacity}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 218\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 31\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 27\n            }, this)), props.extra ? props.extra.details ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n              className: \"Functionality Details\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                children: \"Functionality Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 27\n            }, this) : null : null, props.extra ? props.extra.add ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n              className: \"Add Functionalities Details\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                children: \"Add Functionality Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 27\n            }, this) : null : null, props.extra ? props.extra.edit ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n              className: \"Edit\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 27\n            }, this) : null : null, props.extra ? props.extra.delete ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n              className: \"Delete\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 27\n            }, this) : null : null, props.extra ? props.extra.trigger_button ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n              className: \"Trigger-Button\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                children: \"Trigger Event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 27\n            }, this) : null : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }, this), !!props.data.length ? /*#__PURE__*/_jsxDEV(TableBody, {\n          children: props.data.map((row, elIndex) => {\n            var _row$detailsDisabled, _row$addDisabled, _row$editDisabled, _row$deleteDisabled, _row$triggerButton;\n\n            return /*#__PURE__*/_jsxDEV(StyledTableRow, {\n              children: [props.indexes.map((element, valIndex) => {\n                var _row$element$key$data, _row$element$key;\n\n                return /*#__PURE__*/_jsxDEV(StyledTableCell, {\n                  children: (_row$element$key$data = (_row$element$key = row[element.key]) === null || _row$element$key === void 0 ? void 0 : _row$element$key.data) !== null && _row$element$key$data !== void 0 ? _row$element$key$data : row[element.key]\n                }, valIndex, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 105\n                }, this);\n              }), props.extra ? props.extra.details ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: (_row$detailsDisabled = row.detailsDisabled) !== null && _row$detailsDisabled !== void 0 ? _row$detailsDisabled : false,\n                  onClick: triggerDetailsElement(row),\n                  style: {\n                    minWidth: 0\n                  },\n                  variant: \"text\",\n                  size: \"small\",\n                  children: /*#__PURE__*/_jsxDEV(Settings, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 182\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 48\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 31\n              }, this) : null : null, props.extra ? props.extra.add ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: (_row$addDisabled = row.addDisabled) !== null && _row$addDisabled !== void 0 ? _row$addDisabled : false,\n                  onClick: triggerAddElement(row),\n                  style: {\n                    minWidth: 0\n                  },\n                  variant: \"text\",\n                  size: \"small\",\n                  children: /*#__PURE__*/_jsxDEV(AddBoxOutlined, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 174\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 48\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 31\n              }, this) : null : null, props.extra ? props.extra.edit ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: (_row$editDisabled = row.editDisabled) !== null && _row$editDisabled !== void 0 ? _row$editDisabled : false,\n                  onClick: triggerEditElement(row),\n                  style: {\n                    minWidth: 0\n                  },\n                  variant: \"text\",\n                  size: \"small\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 176\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 48\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 31\n              }, this) : null : null, props.extra ? props.extra.delete ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: (_row$deleteDisabled = row.deleteDisabled) !== null && _row$deleteDisabled !== void 0 ? _row$deleteDisabled : false,\n                  onClick: setDeletingElement(row),\n                  style: {\n                    minWidth: 0\n                  },\n                  variant: \"text\",\n                  size: \"small\",\n                  children: /*#__PURE__*/_jsxDEV(Delete, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 179\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 48\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 31\n              }, this) : null : null, props.extra ? props.extra.trigger_button ? /*#__PURE__*/_jsxDEV(StyledTableCell, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: (_row$triggerButton = row.triggerButton) !== null && _row$triggerButton !== void 0 ? _row$triggerButton : false,\n                  onClick: triggerButtonElement(row),\n                  style: {\n                    minWidth: 0\n                  },\n                  variant: \"text\",\n                  size: \"small\",\n                  children: /*#__PURE__*/_jsxDEV(FlashOnOutlinedIcon, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 180\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 48\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 31\n              }, this) : null : null]\n            }, elIndex, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 17\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(JPTable, \"vVLiHc7arCpFCs/rUcZZPBt0ngU=\", false, function () {\n  return [useStyles, useGlobalStyles, useMountEffect];\n});\n\n_c = JPTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"JPTable\");","map":{"version":3,"sources":["/media/maria/96ae9a87-ebe3-48cb-a2c1-fae5fe76b9e7/maria/Marketplace-JurassicPark/backend/web/src/components/templates/Table/JPTable.tsx"],"names":["React","useState","useCallback","withStyles","createStyles","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Box","Button","ArrowDropUp","ArrowDropDown","Delete","Edit","AddBoxOutlined","Settings","FlashOnOutlinedIcon","useMountEffect","useGlobalStyles","ConfirmActionStateLabel","ConfirmAction","StyledTableCell","theme","head","color","palette","primary","main","fontWeight","fontSize","body","alignContent","StyledTableRow","root","backgroundColor","background","default","useStyles","table","minWidth","tableHeader","cursor","JPTable","props","classes","globalClasses","orderBy","setOrderBy","previousOrderBy","setPreviousOrderBy","asc","setAsc","deleting","setDeleting","undefined","sort","criteria","data","length","newAsc","sorted","a","b","elementA","key","elementB","toLocaleLowerCase","greater","equal","updateData","sortedkey","indexes","setDeletingElement","element","triggerEditElement","extra","edit","action","triggerDetailsElement","details","triggerAddElement","add","triggerButtonElement","trigger_button","deleteLine","Promise","res","rej","delete","then","_","tName","labelKey","catch","confirmActionStatesToRemove","start","label","positiveLabel","negativeLabel","state","executing","success","error","onCancel","onError","onSuccess","filter","cElement","onSuccessDelete","confirmActionPropsDeleting","title","states","currentState","map","index","hoverOpacity","hiddenHoverOpacity","row","elIndex","valIndex","detailsDisabled","addDisabled","editDisabled","deleteDisabled","triggerButton"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react'\nimport { withStyles, Theme, createStyles, makeStyles } from '@material-ui/core/styles'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableContainer from '@material-ui/core/TableContainer'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport Paper from '@material-ui/core/Paper'\nimport { Box, Button } from '@material-ui/core'\nimport { ArrowDropUp,ArrowDropDown,Delete,Edit, AddBoxOutlined, Settings } from '@material-ui/icons'\nimport FlashOnOutlinedIcon from '@material-ui/icons/FlashOnOutlined';\nimport { useMountEffect } from '../../../utils/main'\nimport {useGlobalStyles} from '../../../styles/main'\nimport './JPTable.css'\nimport { ConfirmActionStateLabel, ConfirmActionProps, ConfirmAction } from '../ConfirmAction/ConfirmAction'\n\nconst StyledTableCell = withStyles((theme: Theme) =>\n  createStyles({\n    head: {\n      color: theme.palette.primary.main,\n      fontWeight: 'bold',\n      fontSize: 16,\n    },\n    body: {\n      fontSize: 12,\n      alignContent: 'center',\n    },\n    \n  }),\n)(TableCell)\n\nconst StyledTableRow = withStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '&:nth-of-type(odd)': {\n        backgroundColor: theme.palette.background.default,\n      },\n    },\n  }),\n)(TableRow)\n\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 700,\n  },\n  tableHeader: {\n    cursor:'pointer'\n  }\n})\n\nexport const JPTable = (props: {\n      data: any[], updateData: ((data: any[]) => void)\n      indexes : {label:string, key: string}[]\n      tName: string\n      extra?: {\n        delete? :{\n          action: (element:any) => Promise<any>\n          labelKey: string,\n          onSuccessDelete: (element: any) => void\n        },\n        edit?: {\n          action: (element: any) => void\n        } \n        details? :{\n          action: (element: any) => void\n        },\n        add? :{\n          action: (element: any) => void\n        },\n        trigger_button? :{\n          action: (element: any) => void\n        },\n        monVar_number? :{\n          action: (element: any) => void\n        }\n      }\n      sortedkey? : string}) => {\n    \n    const classes = useStyles()\n    const globalClasses = useGlobalStyles()\n    const [orderBy, setOrderBy] : [string | '', Function] = useState('')\n    const [previousOrderBy, setPreviousOrderBy] : [string | '', Function] = useState('')\n    const [asc, setAsc] : [boolean, Function] = useState(false)\n    const [deleting, setDeleting] : [string | undefined, Function] = useState(undefined)\n\n    const sort = (criteria: string) => {\n\n      if(!props.data.length)\n        return\n        \n      // const criteria = props.indexes[criteriaIndex].key\n      let newAsc = true\n      \n      const sorted : [] = [...props.data.sort((a:any, b:any) => {\n        \n        let elementA = a[criteria].key ?? a[criteria]\n        let elementB = b[criteria].key ?? b[criteria]\n        if(typeof a[criteria] === 'string') {\n          elementA = (a[criteria].key ?? a[criteria] as string).toLocaleLowerCase()\n          elementB = (b[criteria].key ?? b[criteria] as string).toLocaleLowerCase()\n        }\n        \n        const greater = elementA >= elementB\n        const equal = elementA === elementB\n\n        if(criteria === orderBy)\n          newAsc = !asc\n          \n        return equal ? 0 : newAsc ? greater ? 1 : -1 : greater ? -1 : 1\n  \n      })] as []\n      \n      setPreviousOrderBy(orderBy)\n      setOrderBy(criteria)\n      setAsc(newAsc)\n      \n      props.updateData(sorted)\n\n    }\n\n    useMountEffect(() => sort(props.sortedkey ? props.sortedkey : props.indexes[0].key))\n\n    const setDeletingElement = useCallback((element: any) => () => setDeleting(element),[])\n    const triggerEditElement = (element: any) => () => props.extra && props.extra.edit ? props.extra.edit.action(element) : {}\n    const triggerDetailsElement = (element: any) => () => props.extra && props.extra.details ? props.extra.details.action(element) : {}\n    const triggerAddElement = (element: any) => () => props.extra && props.extra.add ? props.extra.add.action(element) : {}\n    const triggerButtonElement = (element: any) => () => props.extra && props.extra.trigger_button ? props.extra.trigger_button.action(element) : {}\n\n    const deleteLine = useCallback(() : Promise<string> => {\n\n      return new Promise((res:Function, rej:Function) => {\n\n        if(!(props.extra?.delete) || !deleting) {\n          rej('')\n          return\n        }\n        \n        props.extra.delete.action(deleting)\n\n          .then(_ => {\n            res(`Correctly deleted ${props.tName} \\n${deleting && props.extra?.delete ? deleting[props.extra?.delete?.labelKey] : ''}.`)\n          })\n          .catch(_ => {\n            rej(`Error deleting ${props.tName} \\n${deleting && props.extra?.delete ? deleting[props.extra?.delete?.labelKey] : ''}.`)\n          })\n      })\n\n    },[deleting,props.extra,props.tName])\n\n    const confirmActionStatesToRemove = {\n\n      start: {\n        label: `Delete ${props.tName} \\n${deleting && props.extra?.delete ? deleting[props.extra?.delete?.labelKey] : ''}?`,\n        positiveLabel: 'Yes',\n        negativeLabel: 'No',\n        state: ConfirmActionStateLabel.start\n      },\n      executing: {\n        label: '',\n        state: ConfirmActionStateLabel.executing,\n      },\n      success: {\n        label: `Correctly deleted ${props.tName} \\n${deleting && props.extra?.delete ? deleting[props.extra?.delete?.labelKey] : ''}.`,\n        state: ConfirmActionStateLabel.success,\n        positiveLabel: 'Ok'\n      },\n      error: {\n        label: `Error deleting ${props.tName} \\n${deleting && props.extra?.delete ? deleting[props.extra?.delete?.labelKey] : ''}.`,\n        state: ConfirmActionStateLabel.error,\n        positiveLabel: 'Ok'\n      },\n    }\n\n    const onCancel = () => setDeleting(undefined)\n    const onError = () => setDeleting(undefined)\n    const onSuccess = () => {\n      props.updateData(props.data.filter((cElement: any) => cElement !== deleting))\n      if(deleting)\n        props.extra?.delete?.onSuccessDelete(deleting)\n    }\n  \n    const confirmActionPropsDeleting : ConfirmActionProps = {\n      \n      title: `Deleting ${props.tName}`,\n      states: confirmActionStatesToRemove,\n      currentState: confirmActionStatesToRemove.start,\n      onCancel: onCancel,\n      onError: onError,\n      onSuccess: onSuccess,\n      action:deleteLine,\n    \n    }\n\n    return (\n      <>\n      {deleting ? <ConfirmAction {...confirmActionPropsDeleting} /> : null }\n      <TableContainer component={Paper}>\n          <Table className={classes.table} size=\"small\" aria-label=\"customized table\">\n              <TableHead>\n                  <TableRow>\n                      {props.indexes.map((element: {key: string, label: string}, index: number) => \n                          <StyledTableCell className={classes.tableHeader} onClick={() => sort(element.key)} key={index}>\n                              <Box className={globalClasses.hoverOpacity} display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n                                  {element.label}\n                                  {element.key === orderBy ? asc ? <ArrowDropUp className={previousOrderBy === orderBy ? \"arrow-up\" : \"\"}/> : <ArrowDropDown className={element.key === orderBy ? \"arrow-down\" : \"\"}/> : <ArrowDropUp className={`${globalClasses.hiddenHoverOpacity}`} />}\n                              </Box> \n                          </StyledTableCell>)\n                      }\n                      {props.extra \n                          ? props.extra.details ? \n                          <StyledTableCell className=\"Functionality Details\">\n                            <Box>Functionality Details</Box>\n                          </StyledTableCell> : null\n                          : null\n                      }\n                      {props.extra \n                          ? props.extra.add ? \n                          <StyledTableCell className=\"Add Functionalities Details\">\n                            <Box>Add Functionality Details</Box>\n                          </StyledTableCell> : null\n                          : null\n                      }\n                      {props.extra \n                          ? props.extra.edit ? \n                          <StyledTableCell className=\"Edit\">\n                            <Box>Edit</Box>\n                          </StyledTableCell> : null\n                          : null\n                      }\n                      {props.extra \n                          ? props.extra.delete ? \n                          <StyledTableCell className=\"Delete\">\n                            <Box>Delete</Box>\n                          </StyledTableCell> : null\n                          : null\n                      }\n                      {props.extra \n                          ? props.extra.trigger_button ? \n                          <StyledTableCell className=\"Trigger-Button\">\n                            <Box>Trigger Event</Box>\n                          </StyledTableCell> : null\n                          : null\n                      }\n                  </TableRow>\n              </TableHead>\n              {!!props.data.length ?\n                <TableBody>\n                {props.data.map((row:any, elIndex:number) => (\n                    <StyledTableRow key={elIndex}>\n                        {props.indexes.map((element: {key: string, label: string}, valIndex: number) => <StyledTableCell key={valIndex}>{row[element.key]?.data ?? row[element.key] }</StyledTableCell>)}\n                        {props.extra \n                          \n                          ? props.extra.details\n                            ? <StyledTableCell><Button disabled={row.detailsDisabled ?? false} onClick={triggerDetailsElement(row)} style={{minWidth:0}} variant=\"text\" size=\"small\"><Settings fontSize=\"small\"/></Button></StyledTableCell> \n                            : null\n                          : null\n                        }\n                           {props.extra \n                          \n                          ? props.extra.add\n                            ? <StyledTableCell><Button disabled={row.addDisabled ?? false} onClick={triggerAddElement(row)} style={{minWidth:0}} variant=\"text\" size=\"small\"><AddBoxOutlined fontSize=\"small\"/></Button></StyledTableCell> \n                            : null\n                          : null\n                        }\n                        {props.extra \n                          \n                          ? props.extra.edit \n                            ? <StyledTableCell><Button disabled={row.editDisabled ?? false} onClick={triggerEditElement(row)} style={{minWidth:0}} variant=\"text\" size=\"small\"><Edit fontSize=\"small\"/></Button></StyledTableCell> \n                            : null\n                          : null\n                        }\n                        {props.extra \n                          \n                          ? props.extra.delete \n                            ? <StyledTableCell><Button disabled={row.deleteDisabled ?? false} onClick={setDeletingElement(row)} style={{minWidth:0}}  variant=\"text\" size=\"small\"><Delete fontSize=\"small\"/></Button></StyledTableCell> \n                            : null\n                          : null\n                        }\n                        {props.extra \n                          \n                          ? props.extra.trigger_button\n                            ? <StyledTableCell><Button disabled={row.triggerButton ?? false} onClick={triggerButtonElement(row)} style={{minWidth:0}}  variant=\"text\" size=\"small\"><FlashOnOutlinedIcon fontSize=\"small\"/></Button></StyledTableCell> \n                            : null\n                          : null\n                        }\n                    </StyledTableRow>\n                ))}\n                </TableBody>\n                : null\n              }\n          </Table>\n      </TableContainer>\n      </>\n    )\n}"]},"metadata":{},"sourceType":"module"}
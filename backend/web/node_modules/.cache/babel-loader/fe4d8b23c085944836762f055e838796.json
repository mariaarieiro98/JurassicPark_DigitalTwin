{"ast":null,"code":"var _jsxFileName = \"/media/maria/96ae9a87-ebe3-48cb-a2c1-fae5fe76b9e7/maria/Marketplace-JurassicPark/backend/web/src/components/DigitalTwin/DigitalTwinForm.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from 'react';\nimport { TextField, Grid, Button, InputLabel, Select } from '@material-ui/core';\nimport { useFunctionBlockStyles } from '../FunctionBlocks/FunctionBlock/style';\nimport { Done, Clear } from '@material-ui/icons';\nimport { ConfirmActionStateLabel, ConfirmAction } from '../templates/ConfirmAction/ConfirmAction';\nimport { getOrDownloadSmartComponents } from '../../utils/smartComponents';\nimport { useMountEffect } from '../../utils/main';\nimport { useStore } from '../templates/Store/Store';\nimport { AssociatedSmartComponentActions } from '../../redux/actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const DigitalTwinForm = (propsDt, propsSc) => {\n  _s();\n\n  var _propsDt$confirmDialo, _propsDt$confirmDialo2, _propsDt$confirmDialo3;\n\n  /**styles */\n  const classes = useFunctionBlockStyles();\n  /**Digital Twin Name*/\n\n  const {\n    dtName,\n    setDtName\n  } = propsDt.dtName;\n  const [validDtName, setValidDtName] = useState(true);\n  const onChangeDtName = useCallback(event => {\n    setDtName(event.target.value.trim());\n    setValidDtName(true);\n  }, [setDtName]);\n  /* Buttons */\n\n  const onCancel = propsDt.cancel.action;\n  const cancelLabel = propsDt.cancel.label;\n  const confirmLabel = propsDt.confirmDialog.buttonTitle;\n  /* Confirmation */\n\n  const [confirm, setConfirm] = useState(false);\n\n  const validateFields = () => {\n    const cValidDtName = dtName.trim() !== '';\n    if (!cValidDtName) setValidDtName(cValidDtName);\n    return cValidDtName;\n  };\n\n  const confirmButtonAction = () => {\n    if (validateFields()) setConfirm(true);\n  };\n\n  const confirmActionStates = {\n    start: {\n      label: (_propsDt$confirmDialo = propsDt.confirmDialog.start) === null || _propsDt$confirmDialo === void 0 ? void 0 : _propsDt$confirmDialo.label,\n      positiveLabel: (_propsDt$confirmDialo2 = propsDt.confirmDialog.start) === null || _propsDt$confirmDialo2 === void 0 ? void 0 : _propsDt$confirmDialo2.positiveLabel,\n      negativeLabel: (_propsDt$confirmDialo3 = propsDt.confirmDialog.start) === null || _propsDt$confirmDialo3 === void 0 ? void 0 : _propsDt$confirmDialo3.negativeLabel,\n      state: ConfirmActionStateLabel.start\n    },\n    executing: {\n      label: '',\n      state: ConfirmActionStateLabel.executing\n    },\n    success: {\n      label: propsDt.confirmDialog.success.label,\n      state: ConfirmActionStateLabel.success,\n      positiveLabel: propsDt.confirmDialog.success.positiveLabel\n    },\n    error: {\n      label: propsDt.confirmDialog.error.label,\n      state: ConfirmActionStateLabel.error,\n      positiveLabel: propsDt.confirmDialog.success.positiveLabel\n    }\n  };\n  const confirmActionProps = {\n    title: propsDt.confirmDialog.title,\n    states: confirmActionStates,\n    currentState: confirmActionStates.executing,\n    onCancel: () => setConfirm(false),\n    onError: () => setConfirm(false),\n    onSuccess: propsDt.confirmDialog.onSuccess,\n    action: propsDt.confirmDialog.action\n  }; //SMART COMPONENTS\n\n  const [fetching, setFetching] = useState(true);\n  const {\n    data: associatedSmartComponents,\n    dispatchAction: dispatchAssociatedSmartComponentActions\n  } = useStore('smartComponents');\n\n  const updateSmartComponents = scs => dispatchAssociatedSmartComponentActions(AssociatedSmartComponentActions.updateSmartComponent(scs));\n\n  const [error, setError] = useState(''); // Recuperar diretamente da comunicação OPC-UA os smart_components disponíveis (SmartComponent)\n\n  useMountEffect(() => {\n    setTimeout(() => {\n      setFetching(true);\n      getOrDownloadSmartComponents(smartComponents).then(result => createAssociatedSmartComponents = result).catch(e => setError(e.msg)).finally(() => setFetching(false));\n    }, 0);\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\" \", confirm ? /*#__PURE__*/_jsxDEV(ConfirmAction, { ...confirmActionProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 23\n    }, this) : null, /*#__PURE__*/_jsxDEV(Grid, {\n      spacing: 1,\n      justify: \"space-between\",\n      item: true,\n      xs: true,\n      container: true,\n      direction: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          onChange: onChangeDtName,\n          value: dtName,\n          helperText: \"\",\n          error: !validDtName,\n          fullWidth: true,\n          required: true,\n          label: \"Insert New Digital Twin Name\",\n          id: \"dt-name\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: `digital-twin-label-${smartComponents}`,\n          children: \"DINASORE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: `digital-twin-label-${smartComponents}`,\n          value: smartComponentChoice,\n          onChange: handleSmartComponentChoice,\n          children: (smartComponents || []).map(smartComponent => {\n            return /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: smartComponent.scName,\n              children: smartComponent.scName\n            }, smartComponent.scId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 83\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: true,\n      container: true,\n      direction: \"row\",\n      justify: \"space-between\",\n      alignItems: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        container: true,\n        direction: \"row\",\n        spacing: 2,\n        alignItems: \"center\",\n        justify: \"flex-end\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onCancel,\n            color: \"secondary\",\n            variant: \"contained\",\n            children: [/*#__PURE__*/_jsxDEV(Clear, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 86\n            }, this), cancelLabel]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: confirmButtonAction,\n            color: \"primary\",\n            variant: \"contained\",\n            children: [/*#__PURE__*/_jsxDEV(Done, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 93\n            }, this), confirmLabel]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(DigitalTwinForm, \"23w/0Nlli7ehEkkXwZyJTth1Lxo=\", false, function () {\n  return [useFunctionBlockStyles, useStore, useMountEffect];\n});\n\n_c = DigitalTwinForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"DigitalTwinForm\");","map":{"version":3,"sources":["/media/maria/96ae9a87-ebe3-48cb-a2c1-fae5fe76b9e7/maria/Marketplace-JurassicPark/backend/web/src/components/DigitalTwin/DigitalTwinForm.tsx"],"names":["React","useState","useCallback","TextField","Grid","Button","InputLabel","Select","useFunctionBlockStyles","Done","Clear","ConfirmActionStateLabel","ConfirmAction","getOrDownloadSmartComponents","useMountEffect","useStore","AssociatedSmartComponentActions","DigitalTwinForm","propsDt","propsSc","classes","dtName","setDtName","validDtName","setValidDtName","onChangeDtName","event","target","value","trim","onCancel","cancel","action","cancelLabel","label","confirmLabel","confirmDialog","buttonTitle","confirm","setConfirm","validateFields","cValidDtName","confirmButtonAction","confirmActionStates","start","positiveLabel","negativeLabel","state","executing","success","error","confirmActionProps","title","states","currentState","onError","onSuccess","fetching","setFetching","data","associatedSmartComponents","dispatchAction","dispatchAssociatedSmartComponentActions","updateSmartComponents","scs","updateSmartComponent","setError","setTimeout","smartComponents","then","result","createAssociatedSmartComponents","catch","e","msg","finally","smartComponentChoice","handleSmartComponentChoice","map","smartComponent","scName","scId"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport { TextField, Grid, Button, InputLabel, Select } from '@material-ui/core'\nimport { useFunctionBlockStyles } from '../FunctionBlocks/FunctionBlock/style'\nimport { Done, Clear } from '@material-ui/icons'\nimport { ConfirmActionProps, ConfirmActionStateLabel, ConfirmActionAction, ConfirmAction } from '../templates/ConfirmAction/ConfirmAction'\nimport { getOrDownloadSmartComponents } from '../../utils/smartComponents'\nimport { useMountEffect } from '../../utils/main'\nimport { AssociatedSmartComponent } from '../../model'\nimport { RequestResponseState } from '../../services/api/api'\nimport { useStore } from '../templates/Store/Store'\nimport { AssociatedSmartComponentActions } from '../../redux/actions'\n\ninterface DigitalTwinProps {\n\n    dtName: {\n        dtName: string\n        setDtName: Function\n    },\n    cancel: {\n        label: string\n        action: () => void\n    },\n    confirmDialog: {\n        buttonTitle: string\n        title: string\n        initialState: ConfirmActionStateLabel\n        action: ConfirmActionAction\n        onSuccess : () => void\n        start? : {\n            label: string\n            positiveLabel: string\n            negativeLabel: string\n        }\n        success: {\n            label:string\n            positiveLabel: string\n        }\n        error: {\n            label: string\n            positiveLabel: string\n        }\n    },\n}\n\ninterface AssociatedSmartComponentsProps {\n\n  scName: {\n      dtName: string\n      setDtName: Function\n  },\n}\n\nexport const DigitalTwinForm = (propsDt: DigitalTwinProps, propsSc: AssociatedSmartComponentsProps) => {\n\n    /**styles */\n    const classes = useFunctionBlockStyles()\n\n    /**Digital Twin Name*/\n    const {dtName, setDtName} = propsDt.dtName\n    const [validDtName, setValidDtName] = useState(true)\n    const onChangeDtName = useCallback((event:any) => {\n\n        setDtName(event.target.value.trim())\n        setValidDtName(true)\n    \n      },[setDtName])\n\n    /* Buttons */\n\n    const onCancel = propsDt.cancel.action\n    const cancelLabel = propsDt.cancel.label\n\n    const confirmLabel = propsDt.confirmDialog.buttonTitle\n\n    /* Confirmation */\n\n    const [confirm, setConfirm] : [boolean, Function] = useState(false)\n\n    const validateFields = () : boolean => {\n\n        const cValidDtName = dtName.trim() !== ''\n            \n        if(!cValidDtName) setValidDtName(cValidDtName)\n    \n        return cValidDtName\n    \n    }\n\n    const confirmButtonAction = () => {\n\n        if(validateFields())\n          setConfirm(true)\n    }\n\n    const confirmActionStates = {\n        start: {\n            label: propsDt.confirmDialog.start?.label,\n            positiveLabel: propsDt.confirmDialog.start?.positiveLabel,\n            negativeLabel: propsDt.confirmDialog.start?.negativeLabel,\n            state: ConfirmActionStateLabel.start\n        },\n        executing: {\n          label: '',\n          state: ConfirmActionStateLabel.executing,\n        },\n        success: {\n          label: propsDt.confirmDialog.success.label,\n          state: ConfirmActionStateLabel.success,\n          positiveLabel: propsDt.confirmDialog.success.positiveLabel\n        },\n        error: {\n          label: propsDt.confirmDialog.error.label,\n          state: ConfirmActionStateLabel.error,\n          positiveLabel: propsDt.confirmDialog.success.positiveLabel\n        },\n      }\n    \n    const confirmActionProps : ConfirmActionProps = {\n\n        title: propsDt.confirmDialog.title,\n        states: confirmActionStates,\n        currentState: confirmActionStates.executing,\n        onCancel: () => setConfirm(false),\n        onError: () => setConfirm(false),\n        onSuccess: propsDt.confirmDialog.onSuccess,\n        action:propsDt.confirmDialog.action,\n      \n    }\n\n    //SMART COMPONENTS\n\n    const [fetching,setFetching] = useState(true)\n    const {data:associatedSmartComponents, dispatchAction:dispatchAssociatedSmartComponentActions} = useStore('smartComponents')\n    const updateSmartComponents = (scs: AssociatedSmartComponent[]) => dispatchAssociatedSmartComponentActions(AssociatedSmartComponentActions.updateSmartComponent(scs))\n    const [error,setError] = useState('')\n\n     // Recuperar diretamente da comunicação OPC-UA os smart_components disponíveis (SmartComponent)\n     useMountEffect(() => {\n\n      setTimeout(() => {\n  \n      setFetching(true)\n      getOrDownloadSmartComponents(smartComponents)\n          .then((result: AssociatedSmartComponent[]) => createAssociatedSmartComponents=(result))\n          .catch((e:RequestResponseState) => setError(e.msg))\n          .finally(() => setFetching(false))\n      }, 0)\n      })\n  \n\n    return (\n        <> {confirm ? <ConfirmAction {...confirmActionProps} /> : null}\n            <Grid spacing={1} justify=\"space-between\" item xs container direction=\"row\">\n              <Grid item xs={6}>\n                <TextField\n                  onChange={onChangeDtName} \n                  value={dtName}\n                  helperText=\"\"\n                  error={!validDtName} \n                  fullWidth required \n                  label=\"Insert New Digital Twin Name\" \n                  id=\"dt-name\" \n                  type=\"text\" />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <InputLabel id={`digital-twin-label-${smartComponents}`}>DINASORE</InputLabel>\n                <Select labelId={`digital-twin-label-${smartComponents}`} value={smartComponentChoice} onChange={handleSmartComponentChoice}>\n                    {(smartComponents || []).map((smartComponent: any) => {return <MenuItem key={smartComponent.scId} value={smartComponent.scName}>{smartComponent.scName}</MenuItem>})}\n                </Select> \n            </Grid>\n            </Grid>\n            <Grid item xs container direction=\"row\" justify=\"space-between\" alignItems=\"center\"> \n              <Grid item xs={6} container direction=\"row\" spacing={2} alignItems=\"center\" justify=\"flex-end\">\n                <Grid item>\n                    <Button onClick={onCancel} color=\"secondary\" variant=\"contained\"><Clear/>{cancelLabel}</Button>\n                </Grid>\n                <Grid>\n                  <Button onClick={confirmButtonAction} color=\"primary\" variant=\"contained\"><Done/>{confirmLabel}</Button>\n                </Grid>\n              </Grid>\n            </Grid>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}
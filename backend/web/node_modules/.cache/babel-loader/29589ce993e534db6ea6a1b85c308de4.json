{"ast":null,"code":"var _jsxFileName = \"/media/maria/96ae9a87-ebe3-48cb-a2c1-fae5fe76b9e7/maria/Marketplace-JurassicPark/backend/web/src/components/DigitalTwin/FunctionalityDetails.tsx\",\n    _s = $RefreshSig$();\n\nimport { Card, CardContent, CardHeader, Divider, Grid } from '@material-ui/core';\nimport { useState } from 'react';\nimport { Redirect, useRouteMatch } from 'react-router-dom';\nimport { routes } from '../../App';\nimport { FunctionalityActions, MonitoredEventActions, MonitoredVariableActions } from '../../redux/actions';\nimport { getOrDownloadFunctionalities, getOrDownloadMonitoredEvents, getOrDownloadMonitoredVariables } from '../../utils/digitalTwins';\nimport { useMountEffect } from '../../utils/main';\nimport { Navigator } from '../templates/Navigator/Navigator';\nimport { useStore } from '../templates/Store/Store';\nimport { JPTable } from '../templates/Table/JPTable';\nimport { FunctionalityForm } from './FunctionalityForm';\nimport { SocketConnection, SOCKET_EVENT } from '../../services/socket/socket'; //Esta página pretende dispor informação mais detalhada da funcionalidade correspondente disponível na página \"DigitalTwinMonitoring\"\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const FunctionalityDetails = () => {\n  _s();\n\n  //Recupera o id da funcionalidade seleccionada anteriormente na página Digital Twin Monitoring\n  const matchParams = useRouteMatch();\n  const id = matchParams.params.id; // Recuperar da base de dados as variáveis que estão a ser monitorizadas (MonitoredVariable)\n\n  const [fetching, setFetching] = useState(true);\n  const [error, setError] = useState('');\n  const {\n    data: monitoredVariables,\n    dispatchAction: dispatchMonitoredVariableActions\n  } = useStore('monitoredVariables');\n\n  const updateMonitoredVariables = monVar => dispatchMonitoredVariableActions(MonitoredVariableActions.updateMonitoredVariable(monVar));\n\n  const [selectedMonitoredVariable, setSelectedMonitoredVariable] = useState([]);\n\n  const initializeMonitoredVariable = monVars => {\n    let monitoredVariable = monVars.filter(monVar => monVar.funcIdAssociated === parseInt(id));\n    setSelectedMonitoredVariable(monitoredVariable);\n  };\n\n  useMountEffect(() => {\n    setFetching(true);\n    getOrDownloadMonitoredVariables(monitoredVariables).then(result => {\n      updateMonitoredVariables(result);\n      initializeMonitoredVariable(result);\n    }).catch(e => {\n      setError(e.msg);\n    }).finally(() => setFetching(false));\n  }); // Recuperar da base de dados os eventos que estão a ser monitorizados (MonitoredEvent)\n\n  const {\n    data: monitoredEvents,\n    dispatchAction: dispatchMonitoredEventActions\n  } = useStore('monitoredEvents');\n\n  const updateMonitoredEvents = monEv => dispatchMonitoredEventActions(MonitoredEventActions.updateMonitoredEvent(monEv));\n\n  const [selectedMonitoredEvent, setSelectedMonitoredEvent] = useState([]);\n\n  const initializeMonitoredEvent = monEvs => {\n    let monitoredEvent = monEvs.filter(monEv => monEv.funcIdAssociated === parseInt(id));\n    setSelectedMonitoredEvent(monitoredEvent);\n  };\n\n  useMountEffect(() => {\n    setFetching(true);\n    getOrDownloadMonitoredEvents(monitoredEvents).then(result => {\n      updateMonitoredEvents(result);\n      initializeMonitoredEvent(result);\n    }).catch(e => {\n      setError(e.msg);\n    }).finally(() => setFetching(false));\n  }); //Cabeçalhos da tabela Variable + Funções Necessárias\n\n  const indexes_variable = [{\n    label: 'Variable',\n    key: 'monitoredVariableName'\n  }, {\n    label: 'Function Block',\n    key: 'fbAssociated'\n  }, {\n    label: 'Smart Component',\n    key: 'scAssociated'\n  }, {\n    label: 'Current Value',\n    key: 'dtMonitoredVariableEvent'\n  }, {\n    label: 'Graph',\n    key: 'dtName'\n  }, {\n    label: 'Remove',\n    key: 'dtName'\n  }];\n\n  const getDataMonitoredVariable = () => selectedMonitoredVariable.map(monitoredVariable => {\n    return { ...monitoredVariable\n    };\n  }); //Cabeçalhos da tabela Event + Funções Necessárias\n\n\n  const indexes_event = [{\n    label: 'Event',\n    key: 'monitoredEventName'\n  }, {\n    label: 'Function Block',\n    key: 'fbAssociated'\n  }, {\n    label: 'Smart Component',\n    key: 'scAssociated'\n  }, {\n    label: 'Trigger',\n    key: 'dtName'\n  }, {\n    label: 'Current Value',\n    key: 'dtMonitoredVariableEvent'\n  }, {\n    label: 'Graph',\n    key: 'dtName'\n  }, {\n    label: 'Remove',\n    key: 'dtName'\n  }];\n\n  const getDataMonitoredEvent = () => selectedMonitoredEvent.map(monitoredEvent => {\n    return { ...monitoredEvent\n    };\n  }); //Variáveis e funções que permitem o redireccionamento para a página DigitalTwinMonitoring\n\n\n  const [redirectTo, setRedirectTo] = useState(\"\");\n\n  const redirectToList = () => setRedirectTo(routes.digitalTwinMonitoring); // Recuperar da base de dados as funcionalidades (Functionality)\n\n\n  const {\n    data: functionalities,\n    dispatchAction: dispatchFunctionalityActions\n  } = useStore('functionalities');\n\n  const updateFunctionalities = funcs => dispatchFunctionalityActions(FunctionalityActions.updateFunctionalities(funcs));\n\n  useMountEffect(() => {\n    setTimeout(() => {\n      setFetching(true);\n      getOrDownloadFunctionalities(functionalities).then(result => updateFunctionalities(result)).catch(e => setError(e.msg)).finally(() => setFetching(false));\n    }, 0);\n  }); //Recuperar dados da funcionalidade\n\n  let [functionalityName, setFunctionalityName] = useState([]);\n  let i = 0;\n\n  while (i < functionalities.length) {\n    if (functionalities[i].funcId == id) {\n      functionalityName = functionalities[i].funcName;\n    }\n\n    i++;\n  } //Recuperar dos sockets a info da MonitoredVariableInstance \n\n\n  let id_sc = 2;\n  const socket = new SocketConnection(SocketConnection.getSmartComponentNamespace(id_sc));\n  const [smartComponentMonVarInstances, setSmartComponentMonVarInstances] = useState([]);\n  const [initialData, setInititalData] = useState(false);\n\n  const onInitialData = data => {\n    var _data$monitoredVariab;\n\n    console.log(\"onInitialData, data: \", data);\n    updateSmartComponentMonitoredVariableInstances((_data$monitoredVariab = data.monitoredVariableInstances) !== null && _data$monitoredVariab !== void 0 ? _data$monitoredVariab : []);\n    setInititalData(true);\n  };\n\n  const [smartComponentName, setSmartComponentName] = useState('');\n  const [smartComponentState, setSmartComponentState] = useState('');\n  const [smartComponentType, setSmartComponentType] = useState('');\n  const [smartComponentCpuMaxFreq, setSmartComponentCpuMaxFreq] = useState(0.0);\n  const [smartComponentCpuMinFreq, setSmartComponentCpuMinFreq] = useState(0.0);\n  const [smartComponentCpuCurrentFreq, setSmartComponentCpuCurrentFreq] = useState(0.0);\n  const [smartComponentCpuPercent, setSmartComponentCpuPercent] = useState(0.0);\n  const [smartComponentMemAvailable, setSmartComponentMemAvailable] = useState(0.0);\n  const [smartComponentMemTotal, setSmartComponentMemTotal] = useState(0.0);\n  const [smartComponentMemUsed, setSmartComponentMemUsed] = useState(0.0);\n  const [smartComponentMemPercentage, setSmartComponentMemPercentage] = useState(0.0);\n  const [smartComponentFbInstances, setSmartComponentFbInstances] = useState([]);\n\n  const updateSmartComponentMonitoredVariableInstances = instances => {\n    console.log(instances);\n    setSmartComponentMonVarInstances(instances);\n  };\n\n  const updateSmartComponent = data => {\n    var _sc$cpuFreqCurrent, _sc$cpuFreqCurrent2, _sc$memAvailable, _, _sc$memTotal, _2, _sc$memUsed, _3;\n\n    const sc = data.sc;\n    if (smartComponentName !== sc.scName) setSmartComponentName(sc.scName);\n    if (smartComponentState !== sc.scState) setSmartComponentState(sc.scState);\n    if (smartComponentType !== sc.scType) setSmartComponentType(sc.scType);\n    if (smartComponentCpuMaxFreq !== sc.cpuFreqMax) setSmartComponentCpuMaxFreq(sc.cpuFreqMax);\n    if (smartComponentCpuMinFreq !== sc.cpuFreqMin) setSmartComponentCpuMinFreq(sc.cpuFreqMin);\n    if (smartComponentCpuCurrentFreq !== ((_sc$cpuFreqCurrent = sc.cpuFreqCurrent) !== null && _sc$cpuFreqCurrent !== void 0 ? _sc$cpuFreqCurrent : 0) / 1000) setSmartComponentCpuCurrentFreq(((_sc$cpuFreqCurrent2 = sc.cpuFreqCurrent) !== null && _sc$cpuFreqCurrent2 !== void 0 ? _sc$cpuFreqCurrent2 : 0) / 1000);\n    if (smartComponentCpuPercent !== sc.cpuPercent) setSmartComponentCpuPercent(sc.cpuPercent);\n    if (smartComponentMemAvailable !== ((_sc$memAvailable = sc.memAvailable) !== null && _sc$memAvailable !== void 0 ? _sc$memAvailable : 0) / 1000000) setSmartComponentMemAvailable(((_ = sc.memAvailable[1]) !== null && _ !== void 0 ? _ : 0) / 1000000);\n    if (smartComponentMemTotal !== ((_sc$memTotal = sc.memTotal) !== null && _sc$memTotal !== void 0 ? _sc$memTotal : 0) / 1000000) setSmartComponentMemTotal(((_2 = sc.memTotal[1]) !== null && _2 !== void 0 ? _2 : 0) / 1000000);\n    if (smartComponentMemUsed !== ((_sc$memUsed = sc.memUsed) !== null && _sc$memUsed !== void 0 ? _sc$memUsed : 0) / 1000000) setSmartComponentMemUsed(((_3 = sc.memUsed[1]) !== null && _3 !== void 0 ? _3 : 0) / 1000000);\n    if (smartComponentMemPercentage !== sc.memPercentage) setSmartComponentMemPercentage(sc.memPercentage);\n  };\n\n  useMountEffect(() => {\n    setTimeout(() => {\n      socket.connect(() => {}, () => {}, onInitialData);\n      socket.addListener(SOCKET_EVENT.EDITED_MVI_EVENT, updateSmartComponentMonitoredVariableInstances);\n    }, 0);\n  }, () => socket === null || socket === void 0 ? void 0 : socket.disconnect());\n  if (redirectTo !== \"\") return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: redirectTo,\n    push: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 12\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Navigator, {\n    title: \"Digital Twin monitoring\",\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            title: functionalityName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(JPTable, {\n                  sortedkey: \"idMonitoredVariable\",\n                  data: getDataMonitoredVariable(),\n                  updateData: updateMonitoredVariables,\n                  indexes: indexes_variable,\n                  tName: \"MonitoredVariable\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(JPTable, {\n                  sortedkey: \"idMonitoredEvent\",\n                  data: getDataMonitoredEvent(),\n                  updateData: updateMonitoredEvents,\n                  indexes: indexes_event,\n                  tName: \"MonitoredEvent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FunctionalityForm, {\n        cancel: {\n          action: redirectToList,\n          label: 'Cancel'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FunctionalityDetails, \"s3OZ7IYANvhro78c0iU0j38SOtQ=\", false, function () {\n  return [useRouteMatch, useStore, useMountEffect, useStore, useMountEffect, useStore, useMountEffect, useMountEffect];\n});\n\n_c = FunctionalityDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"FunctionalityDetails\");","map":{"version":3,"sources":["/media/maria/96ae9a87-ebe3-48cb-a2c1-fae5fe76b9e7/maria/Marketplace-JurassicPark/backend/web/src/components/DigitalTwin/FunctionalityDetails.tsx"],"names":["Card","CardContent","CardHeader","Divider","Grid","useState","Redirect","useRouteMatch","routes","FunctionalityActions","MonitoredEventActions","MonitoredVariableActions","getOrDownloadFunctionalities","getOrDownloadMonitoredEvents","getOrDownloadMonitoredVariables","useMountEffect","Navigator","useStore","JPTable","FunctionalityForm","SocketConnection","SOCKET_EVENT","FunctionalityDetails","matchParams","id","params","fetching","setFetching","error","setError","data","monitoredVariables","dispatchAction","dispatchMonitoredVariableActions","updateMonitoredVariables","monVar","updateMonitoredVariable","selectedMonitoredVariable","setSelectedMonitoredVariable","initializeMonitoredVariable","monVars","monitoredVariable","filter","funcIdAssociated","parseInt","then","result","catch","e","msg","finally","monitoredEvents","dispatchMonitoredEventActions","updateMonitoredEvents","monEv","updateMonitoredEvent","selectedMonitoredEvent","setSelectedMonitoredEvent","initializeMonitoredEvent","monEvs","monitoredEvent","indexes_variable","label","key","getDataMonitoredVariable","map","indexes_event","getDataMonitoredEvent","redirectTo","setRedirectTo","redirectToList","digitalTwinMonitoring","functionalities","dispatchFunctionalityActions","updateFunctionalities","funcs","setTimeout","functionalityName","setFunctionalityName","i","length","funcId","funcName","id_sc","socket","getSmartComponentNamespace","smartComponentMonVarInstances","setSmartComponentMonVarInstances","initialData","setInititalData","onInitialData","console","log","updateSmartComponentMonitoredVariableInstances","monitoredVariableInstances","smartComponentName","setSmartComponentName","smartComponentState","setSmartComponentState","smartComponentType","setSmartComponentType","smartComponentCpuMaxFreq","setSmartComponentCpuMaxFreq","smartComponentCpuMinFreq","setSmartComponentCpuMinFreq","smartComponentCpuCurrentFreq","setSmartComponentCpuCurrentFreq","smartComponentCpuPercent","setSmartComponentCpuPercent","smartComponentMemAvailable","setSmartComponentMemAvailable","smartComponentMemTotal","setSmartComponentMemTotal","smartComponentMemUsed","setSmartComponentMemUsed","smartComponentMemPercentage","setSmartComponentMemPercentage","smartComponentFbInstances","setSmartComponentFbInstances","instances","updateSmartComponent","sc","scName","scState","scType","cpuFreqMax","cpuFreqMin","cpuFreqCurrent","cpuPercent","memAvailable","memTotal","memUsed","memPercentage","connect","addListener","EDITED_MVI_EVENT","disconnect","action"],"mappings":"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","sourcesContent":["import { Card, CardContent, CardHeader, Divider, Grid } from '@material-ui/core'\r\nimport { useState } from 'react'\r\nimport { match, Redirect, useRouteMatch } from 'react-router-dom'\r\nimport { routes } from '../../App'\r\nimport { Functionality, MonitoredEvent, MonitoredVariable, MonitoredVariableInstance, SmartComponent } from '../../model'\r\nimport { FunctionalityActions, MonitoredEventActions, MonitoredVariableActions, SmartComponentActions } from '../../redux/actions'\r\nimport { RequestResponseState } from '../../services/api/api'\r\nimport { getOrDownloadFunctionalities, getOrDownloadMonitoredEvents, getOrDownloadMonitoredVariables } from '../../utils/digitalTwins'\r\nimport { useMountEffect } from '../../utils/main'\r\nimport { Navigator } from '../templates/Navigator/Navigator'\r\nimport { useStore } from '../templates/Store/Store'\r\nimport { JPTable } from '../templates/Table/JPTable'\r\nimport { FunctionalityForm } from './FunctionalityForm'\r\nimport { SocketConnection, SOCKET_EVENT } from '../../services/socket/socket'\r\n\r\n//Esta página pretende dispor informação mais detalhada da funcionalidade correspondente disponível na página \"DigitalTwinMonitoring\"\r\n\r\nexport const FunctionalityDetails = () => {\r\n\r\n    //Recupera o id da funcionalidade seleccionada anteriormente na página Digital Twin Monitoring\r\n    const matchParams : match = useRouteMatch()\r\n    const id = (matchParams.params as any).id\r\n\r\n    // Recuperar da base de dados as variáveis que estão a ser monitorizadas (MonitoredVariable)\r\n    const [fetching,setFetching] = useState(true)\r\n    const [error,setError] = useState('')\r\n    const {data: monitoredVariables, dispatchAction: dispatchMonitoredVariableActions} = useStore('monitoredVariables')\r\n    const updateMonitoredVariables = (monVar: MonitoredVariable[]) => dispatchMonitoredVariableActions(MonitoredVariableActions.updateMonitoredVariable(monVar))\r\n\r\n    const [selectedMonitoredVariable, setSelectedMonitoredVariable] : [MonitoredVariable[], Function] = useState([])\r\n\r\n    const initializeMonitoredVariable = (monVars: MonitoredVariable[]) => {\r\n        \r\n        let monitoredVariable : MonitoredVariable[] = monVars.filter((monVar) => monVar.funcIdAssociated === parseInt(id))\r\n        \r\n        setSelectedMonitoredVariable(monitoredVariable)\r\n\r\n    }\r\n\r\n    useMountEffect(() => {\r\n\r\n        setFetching(true)\r\n        getOrDownloadMonitoredVariables(monitoredVariables)\r\n            .then((result: MonitoredVariable[]) => {\r\n                updateMonitoredVariables(result)\r\n                initializeMonitoredVariable(result)\r\n            })\r\n            .catch((e:RequestResponseState) => {\r\n                setError(e.msg)\r\n            })\r\n            .finally(() => setFetching(false))\r\n\r\n    })\r\n\r\n    // Recuperar da base de dados os eventos que estão a ser monitorizados (MonitoredEvent)\r\n    const {data: monitoredEvents, dispatchAction: dispatchMonitoredEventActions} = useStore('monitoredEvents')\r\n    const updateMonitoredEvents = (monEv: MonitoredEvent[]) => dispatchMonitoredEventActions(MonitoredEventActions.updateMonitoredEvent(monEv))\r\n\r\n    const [selectedMonitoredEvent, setSelectedMonitoredEvent] : [MonitoredEvent[], Function] = useState([])\r\n    \r\n    const initializeMonitoredEvent = (monEvs: MonitoredEvent[]) => {\r\n            \r\n        let monitoredEvent : MonitoredEvent[] = monEvs.filter((monEv) => monEv.funcIdAssociated === parseInt(id))\r\n            \r\n        setSelectedMonitoredEvent(monitoredEvent)\r\n    \r\n    }\r\n    \r\n    useMountEffect(() => {\r\n    \r\n        setFetching(true)\r\n        getOrDownloadMonitoredEvents(monitoredEvents)\r\n            .then((result: MonitoredEvent[]) => {\r\n                updateMonitoredEvents(result)\r\n                initializeMonitoredEvent(result)\r\n            })\r\n            .catch((e:RequestResponseState) => {\r\n                setError(e.msg)\r\n            })\r\n            .finally(() => setFetching(false))\r\n    \r\n    })\r\n    \r\n    //Cabeçalhos da tabela Variable + Funções Necessárias\r\n    const indexes_variable = [\r\n        {label: 'Variable', key: 'monitoredVariableName'},\r\n        {label: 'Function Block', key: 'fbAssociated'},\r\n        {label: 'Smart Component', key: 'scAssociated'},\r\n        {label: 'Current Value', key: 'dtMonitoredVariableEvent'},\r\n        {label: 'Graph', key: 'dtName'},\r\n        {label: 'Remove', key: 'dtName'},\r\n    ]\r\n\r\n    const getDataMonitoredVariable = () =>  selectedMonitoredVariable.map((monitoredVariable: MonitoredVariable) => {    \r\n        \r\n        return {\r\n            ...monitoredVariable\r\n        }\r\n\r\n    })\r\n\r\n    //Cabeçalhos da tabela Event + Funções Necessárias\r\n    const indexes_event = [\r\n        {label: 'Event', key: 'monitoredEventName'},\r\n        {label: 'Function Block', key: 'fbAssociated'},\r\n        {label: 'Smart Component', key: 'scAssociated'},\r\n        {label: 'Trigger', key: 'dtName'},\r\n        {label: 'Current Value', key: 'dtMonitoredVariableEvent'},\r\n        {label: 'Graph', key: 'dtName'},\r\n        {label: 'Remove', key: 'dtName'},\r\n    ]\r\n\r\n    const getDataMonitoredEvent = () =>  selectedMonitoredEvent.map((monitoredEvent: MonitoredEvent) => {    \r\n        \r\n        return {\r\n            ...monitoredEvent\r\n        }\r\n\r\n    })\r\n\r\n    //Variáveis e funções que permitem o redireccionamento para a página DigitalTwinMonitoring\r\n    const [redirectTo, setRedirectTo] : [string, Function] = useState(\"\")\r\n\r\n    const redirectToList = () => setRedirectTo(routes.digitalTwinMonitoring)\r\n\r\n    // Recuperar da base de dados as funcionalidades (Functionality)\r\n    const {data:functionalities, dispatchAction:dispatchFunctionalityActions} = useStore('functionalities')\r\n    const updateFunctionalities = (funcs: Functionality[]) => dispatchFunctionalityActions(FunctionalityActions.updateFunctionalities(funcs))\r\n\r\n    useMountEffect(() => {\r\n\r\n    setTimeout(() => {\r\n\r\n    setFetching(true)\r\n    getOrDownloadFunctionalities(functionalities)\r\n        .then((result: Functionality[]) => updateFunctionalities(result))\r\n        .catch((e:RequestResponseState) => setError(e.msg))\r\n        .finally(() => setFetching(false))\r\n    }, 0)\r\n    })\r\n\r\n    //Recuperar dados da funcionalidade\r\n    let [functionalityName, setFunctionalityName] : [Functionality[], Function] = useState([])\r\n\r\n    let i = 0;\r\n    while(i < functionalities.length){\r\n\r\n        if(functionalities[i].funcId == id) {\r\n          functionalityName = functionalities[i].funcName\r\n        }\r\n        i++\r\n    }\r\n\r\n    //Recuperar dos sockets a info da MonitoredVariableInstance \r\n    let id_sc = 2\r\n    const socket : SocketConnection = new SocketConnection(SocketConnection.getSmartComponentNamespace(id_sc))\r\n    const [smartComponentMonVarInstances,setSmartComponentMonVarInstances] : [MonitoredVariableInstance[],Function] = useState([])\r\n\r\n    const [initialData,setInititalData] = useState(false)\r\n\r\n    const onInitialData = (data:SmartComponent) => {\r\n    \r\n        console.log(\"onInitialData, data: \", data)\r\n        updateSmartComponentMonitoredVariableInstances(data.monitoredVariableInstances ?? [])\r\n        setInititalData(true)\r\n\r\n    } \r\n    \r\n\r\n    const [smartComponentName,setSmartComponentName] : [string,Function] = useState('')\r\n    const [smartComponentState,setSmartComponentState] : [string,Function] = useState('')\r\n    const [smartComponentType,setSmartComponentType] : [string,Function] = useState('')\r\n\r\n    const [smartComponentCpuMaxFreq,setSmartComponentCpuMaxFreq] : [number,Function] = useState(0.0)\r\n    const [smartComponentCpuMinFreq,setSmartComponentCpuMinFreq] : [number,Function] = useState(0.0)\r\n    const [smartComponentCpuCurrentFreq,setSmartComponentCpuCurrentFreq] : [number,Function] = useState(0.0)\r\n    const [smartComponentCpuPercent,setSmartComponentCpuPercent] : [number,Function] = useState(0.0)\r\n\r\n    const [smartComponentMemAvailable,setSmartComponentMemAvailable] : [number,Function] = useState(0.0)\r\n    const [smartComponentMemTotal,setSmartComponentMemTotal] : [number,Function] = useState(0.0)\r\n    const [smartComponentMemUsed,setSmartComponentMemUsed] : [number,Function] = useState(0.0)\r\n    const [smartComponentMemPercentage,setSmartComponentMemPercentage] : [number,Function] = useState(0.0)\r\n    \r\n    const [smartComponentFbInstances,setSmartComponentFbInstances] : [FbInstance[],Function] = useState([])\r\n\r\n    const updateSmartComponentMonitoredVariableInstances = (instances: MonitoredVariableInstance[]) => {\r\n        console.log(instances)\r\n        setSmartComponentMonVarInstances(instances)\r\n\r\n    }\r\n\r\n    const updateSmartComponent = (data: any) => {\r\n    \r\n        const sc : SmartComponent = data.sc\r\n      \r\n        if(smartComponentName !== sc.scName)\r\n            setSmartComponentName(sc.scName)\r\n        if(smartComponentState !== sc.scState)\r\n            setSmartComponentState(sc.scState)\r\n        if(smartComponentType !== sc.scType)\r\n            setSmartComponentType(sc.scType)\r\n        if(smartComponentCpuMaxFreq !== sc.cpuFreqMax)\r\n            setSmartComponentCpuMaxFreq(sc.cpuFreqMax)\r\n        if(smartComponentCpuMinFreq !== sc.cpuFreqMin)\r\n            setSmartComponentCpuMinFreq(sc.cpuFreqMin)\r\n        if(smartComponentCpuCurrentFreq !== (sc.cpuFreqCurrent ?? 0)/1000)\r\n            setSmartComponentCpuCurrentFreq((sc.cpuFreqCurrent ?? 0)/1000)\r\n        if(smartComponentCpuPercent !== sc.cpuPercent)\r\n            setSmartComponentCpuPercent(sc.cpuPercent)\r\n        if(smartComponentMemAvailable !== (sc.memAvailable ?? 0)/1000000)\r\n            setSmartComponentMemAvailable(((sc.memAvailable as any)[1] ?? 0) / 1000000)\r\n        if(smartComponentMemTotal !== (sc.memTotal ?? 0)/1000000)\r\n            setSmartComponentMemTotal(((sc.memTotal as any)[1] ?? 0) / 1000000)\r\n        if(smartComponentMemUsed !== (sc.memUsed ?? 0)/1000000)\r\n            setSmartComponentMemUsed(((sc.memUsed as any)[1] ?? 0) / 1000000)\r\n        if(smartComponentMemPercentage !== sc.memPercentage)\r\n            setSmartComponentMemPercentage(sc.memPercentage)\r\n        \r\n    }\r\n    \r\n    useMountEffect(() => {\r\n        \r\n        setTimeout(() => {\r\n            \r\n            socket.connect(()=>{}, () => {},onInitialData)\r\n            socket.addListener(SOCKET_EVENT.EDITED_MVI_EVENT,updateSmartComponentMonitoredVariableInstances)\r\n        }\r\n        ,0)\r\n\r\n    }, () => socket?.disconnect())\r\n\r\n    if(redirectTo !== \"\") \r\n    return <Redirect to={redirectTo} push={true} />\r\n\r\n    return(\r\n    <Navigator title=\"Digital Twin monitoring\">\r\n    <>\r\n        <Grid item>\r\n            <Card>\r\n                <CardHeader title={functionalityName} />\r\n                <Divider />\r\n                    <CardContent>\r\n                        <Grid item xs={12}>        \r\n                            <Grid item>\r\n                                <JPTable\r\n                                    sortedkey=\"idMonitoredVariable\"\r\n                                    data={getDataMonitoredVariable()} \r\n                                    updateData={updateMonitoredVariables} \r\n                                    indexes={indexes_variable} \r\n                                    tName='MonitoredVariable'\r\n                                />\r\n                            </Grid>\r\n                        </Grid>\r\n                    </CardContent>\r\n                    <CardContent>\r\n                        <Grid item xs={12}>        \r\n                            <Grid item>\r\n                                <JPTable\r\n                                    sortedkey=\"idMonitoredEvent\"\r\n                                    data={getDataMonitoredEvent()} \r\n                                    updateData={updateMonitoredEvents} \r\n                                    indexes={indexes_event} \r\n                                    tName='MonitoredEvent'\r\n                                />\r\n                            </Grid>\r\n                            \r\n                        </Grid>\r\n                    </CardContent>\r\n            </Card>\r\n        </Grid>\r\n        <FunctionalityForm\r\n            cancel={{action: redirectToList, label: 'Cancel'}}\r\n        />\r\n    </>\r\n    </Navigator>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}
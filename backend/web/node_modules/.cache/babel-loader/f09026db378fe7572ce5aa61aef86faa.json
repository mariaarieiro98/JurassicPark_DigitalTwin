{"ast":null,"code":"var _jsxFileName = \"/home/maria/Desktop/Marketplace-JurassicPark/backend/web/src/components/templates/ConfirmAction/ConfirmAction.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Dialog, Button, Grid, DialogTitle, CircularProgress, Typography } from '@material-ui/core';\nimport { useDialogStyles } from './style';\nimport { Error, CheckCircle } from '@material-ui/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let ConfirmActionStateLabel;\n\n(function (ConfirmActionStateLabel) {\n  ConfirmActionStateLabel[ConfirmActionStateLabel[\"start\"] = 0] = \"start\";\n  ConfirmActionStateLabel[ConfirmActionStateLabel[\"executing\"] = 1] = \"executing\";\n  ConfirmActionStateLabel[ConfirmActionStateLabel[\"success\"] = 2] = \"success\";\n  ConfirmActionStateLabel[ConfirmActionStateLabel[\"error\"] = 3] = \"error\";\n})(ConfirmActionStateLabel || (ConfirmActionStateLabel = {}));\n\nexport const ConfirmAction = /*#__PURE__*/React.memo(_c = _s(props => {\n  _s();\n\n  const [state, setState] = useState({ ...props.currentState\n  });\n  const stateCode = state.state;\n  const classes = useDialogStyles();\n  const {\n    action,\n    onCancel,\n    onSuccess,\n    onError,\n    states\n  } = props;\n  const updateState = useCallback((success = true, msg) => {\n    switch (stateCode) {\n      case ConfirmActionStateLabel.start:\n        setState({ ...states.executing\n        });\n        break;\n\n      case ConfirmActionStateLabel.executing:\n        if (!success) {\n          if (!!states.error) {\n            setState({ ...states.error,\n              label: msg\n            });\n          } else onCancel();\n        } else {\n          if (!!states.success) {\n            setState({ ...states.success,\n              label: msg\n            });\n          } else onCancel();\n        }\n\n        break;\n\n      case ConfirmActionStateLabel.success:\n        if (onSuccess) {\n          onSuccess();\n        }\n\n        onCancel();\n        break;\n\n      case ConfirmActionStateLabel.error:\n        if (onError) onError();\n        onCancel();\n        break;\n    }\n  }, [stateCode, onCancel, onSuccess, onError, states]);\n  const execute = useCallback(() => {\n    if (!action) return;\n    action().then(result => updateState(true, result)).catch(error => updateState(false, error));\n  }, [action, updateState]);\n  useEffect(() => {\n    if (stateCode === ConfirmActionStateLabel.executing) {\n      execute();\n    }\n  });\n  const updateStateButtonAction = useCallback(() => updateState(), [updateState]);\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: true,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: props.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      className: classes.box,\n      container: true,\n      direction: \"column\",\n      justify: \"center\",\n      alignItems: \"center\",\n      children: [state.state === ConfirmActionStateLabel.executing ? /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }, this) : null, state.state !== ConfirmActionStateLabel.executing ? /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        children: [state.state === ConfirmActionStateLabel.error ? /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Error, {\n            color: \"error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 37\n        }, this) : state.state === ConfirmActionStateLabel.success ? /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 45\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 41\n        }, this) : null, /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"primary\",\n            children: state.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      className: classes.buttons,\n      container: true,\n      direction: \"row\",\n      justify: \"space-between\",\n      children: [state.positiveLabel ? /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: updateStateButtonAction,\n          children: state.positiveLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }, this) : null, state.negativeLabel ? /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: props.onCancel,\n          children: state.negativeLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n}, \"5YgcML7tu7n3rnvBo3Ksgy8ApRY=\", false, function () {\n  return [useDialogStyles];\n}));\n_c2 = ConfirmAction;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ConfirmAction$React.memo\");\n$RefreshReg$(_c2, \"ConfirmAction\");","map":{"version":3,"sources":["/home/maria/Desktop/Marketplace-JurassicPark/backend/web/src/components/templates/ConfirmAction/ConfirmAction.tsx"],"names":["React","useState","useEffect","useCallback","Dialog","Button","Grid","DialogTitle","CircularProgress","Typography","useDialogStyles","Error","CheckCircle","ConfirmActionStateLabel","ConfirmAction","memo","props","state","setState","currentState","stateCode","classes","action","onCancel","onSuccess","onError","states","updateState","success","msg","start","executing","error","label","execute","then","result","catch","updateStateButtonAction","title","box","buttons","positiveLabel","negativeLabel"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport { Dialog, Button, Grid, DialogTitle, CircularProgress, Typography } from '@material-ui/core'\nimport { useDialogStyles } from './style'\nimport { Error, CheckCircle } from '@material-ui/icons'\n\nexport enum ConfirmActionStateLabel {start, executing,success, error}\n\nexport type ConfirmActionAction = () => Promise<string>\n\nexport interface ConfirmActionState {\n\n    label?: string\n    state: ConfirmActionStateLabel\n    positiveLabel?: string\n    negativeLabel?: string\n    \n}\n\nexport interface ConfirmActionProps {\n\n    title:string\n    states: {\n        start? : ConfirmActionState\n        executing?: ConfirmActionState\n        success?: ConfirmActionState\n        error?: ConfirmActionState\n    }\n    currentState: ConfirmActionState\n    onCancel: () => void\n    onError?: () => void\n    onSuccess?: () => void\n    action?: ConfirmActionAction\n\n}\n\nexport const ConfirmAction = React.memo((props: ConfirmActionProps) => {\n\n    const [state, setState] : [ConfirmActionState, Function] = useState({...props.currentState})\n\n    const stateCode = state.state\n\n    const classes = useDialogStyles()\n\n    const {action,onCancel,onSuccess,onError,states} = props\n\n    const updateState = useCallback((success: boolean = true, msg?: string) => {\n\n        switch(stateCode) {\n\n            case ConfirmActionStateLabel.start:\n                setState({...states.executing})\n                break\n            case ConfirmActionStateLabel.executing:\n\n                if(!success) {\n                    if(!!states.error) {                        \n                        setState({...states.error, label: msg})\n                    }\n                    else\n                        onCancel()\n                }\n\n                else {\n\n                    if(!!states.success) {                        \n                        setState({...states.success, label: msg})\n                    }\n                    else\n                        onCancel()\n\n                }\n\n                break\n            case ConfirmActionStateLabel.success:\n                if(onSuccess) {\n                    onSuccess()\n                } \n                onCancel()\n                break\n            case ConfirmActionStateLabel.error:\n                if(onError) onError()\n                onCancel()\n                break\n\n        }\n\n    }, [stateCode,onCancel,onSuccess,onError,states])\n\n    const execute = useCallback(() => {\n\n        if(!action)\n            return\n\n        action()\n\n            .then(result => updateState(true,result))\n\n            .catch(error => updateState(false,error))\n    \n    }, [action, updateState])\n\n    useEffect(() => {\n        \n        if(stateCode === ConfirmActionStateLabel.executing) {\n            execute()\n        }\n\n    })\n\n    const updateStateButtonAction = useCallback(() => updateState(),[updateState])\n\n    return (\n\n        <Dialog open={true}>\n            <DialogTitle>{props.title}</DialogTitle>\n            <Grid className={classes.box} container direction=\"column\" justify=\"center\" alignItems=\"center\">\n                {state.state === ConfirmActionStateLabel.executing \n                    ?\n                        <Grid item>\n                            <CircularProgress color=\"primary\" /> \n                        </Grid>\n                    :   null\n                }\n                {state.state !== ConfirmActionStateLabel.executing \n                    ? \n                        <Grid item container direction=\"row\" justify=\"center\">\n                            {state.state === ConfirmActionStateLabel.error \n                                ? \n                                    <Grid item> \n                                        <Error color=\"error\" />\n                                    </Grid>\n\n                                : state.state === ConfirmActionStateLabel.success \n                                    ? \n                                        <Grid item> \n                                            <CheckCircle color=\"primary\" />\n                                        </Grid> \n                                    :\n                                        null\n                                }\n                                <Grid item>\n                                    <Typography color=\"primary\">\n                                        {state.label}\n                                    </Typography>\n                                </Grid>\n                        </Grid>\n                    : null\n                }\n            </Grid>\n            <Grid className={classes.buttons} container direction=\"row\" justify=\"space-between\">\n                {state.positiveLabel\n                    ?\n                    <Grid item>\n                        <Button onClick={updateStateButtonAction}>{state.positiveLabel}</Button>\n                    </Grid>\n                    : null\n                }\n                {state.negativeLabel  \n                    ?\n                    <Grid item>\n                        <Button onClick={props.onCancel}>{state.negativeLabel}</Button>\n                    </Grid>\n                    : null\n                }\n                \n            </Grid>\n        </Dialog>\n\n    )\n\n})"]},"metadata":{},"sourceType":"module"}
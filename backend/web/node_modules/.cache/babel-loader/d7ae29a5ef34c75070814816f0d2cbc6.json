{"ast":null,"code":"export let RouteMethod;\n\n(function (RouteMethod) {\n  RouteMethod[\"get\"] = \"get\";\n  RouteMethod[\"post\"] = \"post\";\n  RouteMethod[\"put\"] = \"put\";\n  RouteMethod[\"delete\"] = \"delete\";\n  RouteMethod[\"patch\"] = \"patch\";\n})(RouteMethod || (RouteMethod = {}));\n\nclass API {\n  constructor(host, port) {\n    this.host = void 0;\n    this.port = void 0;\n    this.base = void 0;\n    this.resources = {\n      functionBlocks: 'function-block',\n      functionBlockCategories: 'function-block-category',\n      digitalTwins: 'digital-twin',\n      functionalities: 'functionality',\n      smartComponents: 'smart-component',\n      images: 'images',\n      icons: 'icons',\n      file: 'public',\n      associatedSmartComponents: 'associated-smart-components'\n    };\n\n    this.getBase = () => this.base;\n\n    this.getImage = (code, resource) => this.getFile(code, this.resources.images, resource);\n\n    this.getIcon = (code, resource) => this.getFile(code, this.resources.icons, resource);\n\n    this.getFile = (code, type, resource) => ({\n      path: `${this.base}${this.resources.file}/${type}/${resource}/${code}.jpg`,\n      method: RouteMethod.get\n    });\n\n    this.getFunctionBlockPath = (method, id) => ({\n      path: `${this.base}${this.resources.functionBlocks}/${id ? id : ''}`,\n      method: method\n    });\n\n    this.getFunctionBlockCategoryPath = (method, id) => ({\n      path: `${this.base}${this.resources.functionBlockCategories}/${id ? id : ''}`,\n      method: method\n    });\n\n    this.getDigitalTwinPath = (method, id) => ({\n      path: `${this.base}${this.resources.digitalTwins}/${id ? id : ''}`,\n      method: method\n    });\n\n    this.getFunctionalityPath = (method, id) => ({\n      path: `${this.base}${this.resources.functionalities}/${id ? id : ''}`,\n      method: method\n    });\n\n    this.getSmartObjectPath = (method, id) => ({\n      path: `${this.base}${this.resources.smartComponents}/${id ? id : ''}`,\n      method: method\n    });\n\n    this.getAssociatedSmartComponentPath = (method, id) => ({\n      path: `${this.base}${this.resources.associatedSmartComponents}/${id ? id : ''}`,\n      method: method\n    });\n\n    this.host = host === undefined ? 'localhost' : host;\n    this.port = port === undefined ? 3000 : parseInt(port);\n    this.base = `${this.host}:${this.port}/`;\n  }\n\n}\n/**\n * \n * @param route \n * @param body \n * @param cors \n * @param headers\n * \n * @returns Promise that resolves to a RequestResponseState in case of a post,put or delete and a result in case of get, and rejects to a RequestResponseState\n */\n\n\nexport const fetchRequest = (route, hasData = true, body = undefined, cors = true, headers = {\n  'Content-Type': 'application/json'\n}) => {\n  let options = {};\n  if (cors) options.credentials = 'include';\n\n  if (route.method !== RouteMethod.get) {\n    options.headers = headers;\n    options.body = JSON.stringify(body);\n    options.method = route.method;\n  }\n\n  return new Promise((res, rej) => {\n    fetch(route.path, options).then(result => {\n      if (result.ok) result.json().then(json => hasData ? res(json.result) : res(json.state)).catch(error => rej(unknowErrorState(error)));else {\n        result.json().then(json => rej(json.state)).catch(error => rej(unknowErrorState(error)));\n      }\n    }).catch(error => rej(unknowErrorState(error)));\n  });\n};\n\nconst unknowErrorState = error => ({\n  error: true,\n  msg: error.toString ? error.toString() : 'Unknown error',\n  errorCode: 0,\n  extra: {}\n});\n\nexport const apiRoutes = new API(process.env.REACT_APP_BACKEND_HOST, process.env.REACT_APP_BACKEND_PORT);","map":{"version":3,"sources":["/media/maria/96ae9a87-ebe3-48cb-a2c1-fae5fe76b9e7/maria/Marketplace-JurassicPark/backend/web/src/services/api/api.ts"],"names":["RouteMethod","API","constructor","host","port","base","resources","functionBlocks","functionBlockCategories","digitalTwins","functionalities","smartComponents","images","icons","file","associatedSmartComponents","getBase","getImage","code","resource","getFile","getIcon","type","path","method","get","getFunctionBlockPath","id","getFunctionBlockCategoryPath","getDigitalTwinPath","getFunctionalityPath","getSmartObjectPath","getAssociatedSmartComponentPath","undefined","parseInt","fetchRequest","route","hasData","body","cors","headers","options","credentials","JSON","stringify","Promise","res","rej","fetch","then","result","ok","json","state","catch","error","unknowErrorState","msg","toString","errorCode","extra","apiRoutes","process","env","REACT_APP_BACKEND_HOST","REACT_APP_BACKEND_PORT"],"mappings":"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","sourcesContent":["export enum RouteMethod {\n    get='get',\n    post='post',\n    put='put',\n    delete='delete',\n    patch='patch'\n}\n\nexport interface Route {\n    path: string\n    method: RouteMethod\n}\n\nclass API {\n\n    private host : string \n    private port : number \n    private base : string\n\n    private resources = {\n        functionBlocks: 'function-block',\n        functionBlockCategories: 'function-block-category',\n        digitalTwins: 'digital-twin',\n        functionalities: 'functionality',\n        smartComponents: 'smart-component',\n        images: 'images',\n        icons: 'icons',\n        file: 'public',\n        associatedSmartComponents: 'associated-smart-components'\n    }\n\n    \n    constructor(host: string | undefined, port: string | undefined) {\n        this.host = host === undefined ? 'localhost' : host\n        this.port = port === undefined ? 3000 : parseInt(port)\n        this.base = `${this.host}:${this.port}/`\n    }\n    \n    public getBase = () => this.base\n   \n    public getImage = (code: string, resource: string) : Route => this.getFile(code,this.resources.images,resource)\n    \n    public getIcon = (code: string, resource: string) : Route => this.getFile(code,this.resources.icons,resource)\n\n    public getFile = (code: string, type: string, resource: string) : Route => ({\n        path: `${this.base}${this.resources.file}/${type}/${resource}/${code}.jpg`,\n        method: RouteMethod.get\n    })\n    \n    public getFunctionBlockPath = (method: RouteMethod, id?: number) : Route => ({\n        \n        path: `${this.base}${this.resources.functionBlocks}/${id ? id : ''}`,\n        method: method\n        \n    })\n\n    public getFunctionBlockCategoryPath = (method: RouteMethod, id?: number) : Route => ({\n        \n        path: `${this.base}${this.resources.functionBlockCategories}/${id ? id : ''}`,\n        method: method\n        \n    })\n\n    public getDigitalTwinPath = (method: RouteMethod, id?: number) : Route => ({\n        \n        path: `${this.base}${this.resources.digitalTwins}/${id ? id : ''}`,\n        method: method\n        \n    })\n\n    public getFunctionalityPath = (method: RouteMethod, id?: number) : Route => ({\n        \n        path: `${this.base}${this.resources.functionalities}/${id ? id : ''}`,\n        method: method\n        \n    })\n\n    public getSmartObjectPath = (method: RouteMethod, id?: number) : Route => ({\n        \n        path: `${this.base}${this.resources.smartComponents}/${id ? id : ''}`,\n        method: method \n    })\n\n    public getAssociatedSmartComponentPath = (method: RouteMethod, id?: number) : Route => ({\n        \n        path: `${this.base}${this.resources.associatedSmartComponents}/${id ? id : ''}`,\n        method: method \n    })\n\n}\n\n/**\n * \n * @param route \n * @param body \n * @param cors \n * @param headers\n * \n * @returns Promise that resolves to a RequestResponseState in case of a post,put or delete and a result in case of get, and rejects to a RequestResponseState\n */\n\nexport const fetchRequest = (route:Route, hasData:boolean=true, body: Object | undefined = undefined, cors: boolean = true, headers: any = {'Content-Type':'application/json'}) : Promise<any> => {\n\n    let options : RequestInit = {}\n\n    if(cors)\n        options.credentials = 'include'\n\n    if(route.method !== RouteMethod.get) {\n        options.headers = headers\n        options.body = JSON.stringify(body)\n        options.method = route.method\n    }\n \n    return new Promise((res:Function, rej:Function) => {\n\n        fetch(route.path,options).then(result => {\n\n            if(result.ok)\n                result.json()\n                    .then((json: RequestResponse) => hasData ? res(json.result) : res(json.state))\n                    .catch(error =>  rej(unknowErrorState(error)))\n            else {\n                result.json()\n                    .then((json: RequestResponse) => rej(json.state))\n                    .catch(error => rej(unknowErrorState(error)))\n            }\n                \n        })\n        \n        .catch(error => rej(unknowErrorState(error)))\n\n    })\n\n}\n\n\nconst unknowErrorState = (error:any) : RequestResponseState => ({\n    \n    error: true,\n    msg: error.toString ? error.toString() : 'Unknown error',\n    errorCode: 0,\n    extra: {}\n    \n})\n\nexport interface RequestResponseState {\n    error: boolean\n    msg: string\n    errorCode: number\n    extra: any\n}\n\nexport interface RequestResponse {\n    state:RequestResponseState\n    result: any\n}\n\nexport const apiRoutes = new API(process.env.REACT_APP_BACKEND_HOST, process.env.REACT_APP_BACKEND_PORT)"]},"metadata":{},"sourceType":"module"}
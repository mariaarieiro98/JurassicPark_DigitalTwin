{"ast":null,"code":"var _jsxFileName = \"/home/maria/Desktop/Marketplace-JurassicPark/backend/web/src/components/DigitalTwin/DigitalTwinForm.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from 'react';\nimport { FormControl, InputLabel, TextField, Grid, Select, MenuItem, Box, Button, Typography, Chip } from '@material-ui/core';\nimport { InOutType } from '../../model';\nimport { useFunctionBlockStyles } from '../FunctionBlocks/FunctionBlock/style';\nimport { VariableList } from './Variable';\nimport { setSimpleField } from '../../utils/main';\nimport { EventList } from './Event';\nimport { Done, Clear } from '@material-ui/icons';\nimport { ReactComponent as UploadIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../icons/Upload.svg\";\nimport { ConfirmActionStateLabel, ConfirmAction } from '../templates/ConfirmAction/ConfirmAction';\nimport { useStore } from '../templates/Store/Store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const DigitalTwin = props => {\n  _s();\n\n  var _props$confirmDialog$, _props$confirmDialog$2, _props$confirmDialog$3, _props$byPassFields2;\n\n  /**styles */\n  const classes = useFunctionBlockStyles();\n  /**list of categories */\n\n  const {\n    data: functionBlockCategories,\n    dispatchAction: dispatchFunctionBlockCategoriesActions\n  } = useStore('functionBlockCategories');\n  const [validCategory, setValidCategory] = useState(true);\n  /**Fb type */\n\n  const {\n    fbType,\n    setFbType\n  } = props.fbType;\n  const [validType, setValidType] = useState(true);\n  const onChangeFBType = useCallback(event => {\n    setFbType(event.target.value.trim());\n    setValidType(true);\n  }, [setFbType]);\n  /* Buttons */\n\n  const onCancel = props.cancel.action;\n  const cancelLabel = props.cancel.label;\n  const confirmLabel = props.confirmDialog.buttonTitle;\n  /* Confirmation */\n\n  const [confirm, setConfirm] = useState(false);\n\n  const validateFields = () => {\n    var _props$byPassFields;\n\n    const cValidType = fbType.trim() !== '';\n    const cValidDescription = fbDescription.trim() !== '';\n    const cValidGeneralCategory = !!fbGeneralCategory;\n    const cValidCategory = fbCategory.fbcId !== -1;\n    const cValidFile = !!((_props$byPassFields = props.byPassFields) === null || _props$byPassFields === void 0 ? void 0 : _props$byPassFields.fbImplFile) || fbImplFile.name !== '';\n    if (!cValidType) setValidType(cValidType);\n    if (!cValidDescription) setValidDescription(cValidDescription);\n    if (!cValidGeneralCategory) setValidGeneralCategory(cValidGeneralCategory);\n    if (!cValidCategory) setValidCategory(cValidCategory);\n    if (!cValidFile) setValidFile(cValidFile);\n    return cValidType && cValidGeneralCategory && cValidCategory && cValidDescription && cValidFile;\n  };\n\n  const confirmButtonAction = () => {\n    if (validateFields()) setConfirm(true);\n  };\n\n  const confirmActionStates = {\n    start: {\n      label: (_props$confirmDialog$ = props.confirmDialog.start) === null || _props$confirmDialog$ === void 0 ? void 0 : _props$confirmDialog$.label,\n      positiveLabel: (_props$confirmDialog$2 = props.confirmDialog.start) === null || _props$confirmDialog$2 === void 0 ? void 0 : _props$confirmDialog$2.positiveLabel,\n      negativeLabel: (_props$confirmDialog$3 = props.confirmDialog.start) === null || _props$confirmDialog$3 === void 0 ? void 0 : _props$confirmDialog$3.negativeLabel,\n      state: ConfirmActionStateLabel.start\n    },\n    executing: {\n      label: '',\n      state: ConfirmActionStateLabel.executing\n    },\n    success: {\n      label: props.confirmDialog.success.label,\n      state: ConfirmActionStateLabel.success,\n      positiveLabel: props.confirmDialog.success.positiveLabel\n    },\n    error: {\n      label: props.confirmDialog.error.label,\n      state: ConfirmActionStateLabel.error,\n      positiveLabel: props.confirmDialog.success.positiveLabel\n    }\n  };\n  const confirmActionProps = {\n    title: props.confirmDialog.title,\n    states: confirmActionStates,\n    currentState: confirmActionStates.executing,\n    onCancel: () => setConfirm(false),\n    onError: () => setConfirm(false),\n    onSuccess: props.confirmDialog.onSuccess,\n    action: props.confirmDialog.action\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\" \", confirm ? /*#__PURE__*/_jsxDEV(ConfirmAction, { ...confirmActionProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 23\n    }, this) : null, /*#__PURE__*/_jsxDEV(Grid, {\n      onDrop: onDropFiles,\n      spacing: 2,\n      container: true,\n      direction: \"column\",\n      component: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        container: true,\n        alignItems: \"center\",\n        justify: errorReadingFBT.file ? 'space-between' : 'flex-end',\n        direction: \"row\",\n        children: [errorReadingFBT.file ? /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: errorReadingFBT.err ? /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"error\",\n            children: errorReadingFBT.msg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 40\n          }, this) : /*#__PURE__*/_jsxDEV(Done, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 103\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 15\n        }, this) : null, /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: onChangeFBTFile,\n            value: \"\",\n            accept: \".xml,.fbt\",\n            type: \"file\",\n            id: \"raised-button-file\",\n            hidden: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"raised-button-file\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              component: \"span\",\n              size: \"small\",\n              children: \"Choose fbt file for form auto completion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        spacing: 1,\n        justify: \"space-between\",\n        item: true,\n        xs: true,\n        container: true,\n        direction: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            onChange: onChangeFBType,\n            value: fbType,\n            helperText: \"\",\n            error: !validType,\n            fullWidth: true,\n            required: true,\n            label: \"Type\",\n            id: \"fb-type\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: true,\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              error: !validCategory,\n              id: \"category-label\",\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                error: !validCategory,\n                labelId: \"category-label\",\n                value: fbCategory.fbcName,\n                onChange: event => {\n                  setValidCategory(true);\n                  setFbCategory(functionBlockCategories.filter(cat => event.target.value === cat.fbcName)[0]);\n                },\n                children: functionBlockCategories.map((cat, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: cat.fbcName,\n                  children: cat.fbcName\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 86\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 21\n              }, this)\n            }, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: true,\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              error: !validGeneralCategory,\n              id: \"gen-category-label\",\n              children: \"General Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              error: !validGeneralCategory,\n              labelId: \"gen-category-label\",\n              value: fbGeneralCategory || '',\n              onChange: event => {\n                setValidGeneralCategory(true);\n                changeGeneralCategory(event.target.value);\n              },\n              children: generalCategoryNames.map((cat, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: cat,\n                children: cat\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 74\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: true,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          helperText: \"\",\n          variant: \"standard\",\n          fullWidth: true,\n          required: true,\n          multiline: true,\n          rowsMax: \"4\",\n          label: \"Description\",\n          id: \"description\",\n          type: \"text\",\n          error: !validDescription,\n          onChange: setSimpleField(setFbDescription, () => setValidDescription(true)),\n          value: fbDescription\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: true,\n        children: \"Variables\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        item: true,\n        xs: true,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.box,\n          spacing: 1,\n          item: true,\n          container: true,\n          direction: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            children: /*#__PURE__*/_jsxDEV(VariableList, {\n              onVariableEdition: onInputVariableEdition,\n              onVariableRemoval: onInputVariableRemoval,\n              setVariables: setFbInputVariables,\n              inOutType: InOutType.in,\n              title: \"Input\",\n              variables: fbInputVariables\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            children: /*#__PURE__*/_jsxDEV(VariableList, {\n              onVariableEdition: onOutputVariableEdition,\n              onVariableRemoval: onOutputVariableRemoval,\n              setVariables: setFbOutputVariables,\n              inOutType: InOutType.out,\n              title: \"Output\",\n              variables: fbOutputVariables\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: true,\n        children: \"Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        item: true,\n        xs: true,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.box,\n          spacing: 1,\n          item: true,\n          container: true,\n          direction: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            children: /*#__PURE__*/_jsxDEV(EventList, {\n              setEvent: setInputEvent,\n              removeEvent: removeInputEvent,\n              addNewEvent: addNewInputEvent,\n              setEvents: setFbInputEvents,\n              newEvent: newInputEvent,\n              setNewEvent: setNewInputEvent,\n              variables: fbInputVariables,\n              inOutType: InOutType.in,\n              title: \"Input\",\n              events: fbInputEvents\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            children: /*#__PURE__*/_jsxDEV(EventList, {\n              setEvent: setOutputEvent,\n              removeEvent: removeOutputEvent,\n              addNewEvent: addNewOutputEvent,\n              setEvents: setFbOutputEvents,\n              newEvent: newOutputEvent,\n              setNewEvent: setNewOutputEvent,\n              variables: fbOutputVariables,\n              inOutType: InOutType.out,\n              title: \"Output\",\n              events: fbOutputEvents\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: true,\n        children: \"Dependencies\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        xs: true,\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          container: true,\n          className: classes.box,\n          alignItems: \"center\",\n          justify: \"space-between\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            container: true,\n            direction: \"row\",\n            spacing: 1,\n            alignItems: \"flex-end\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                onChange: onChangeCurrentDependency,\n                value: currentDependency,\n                helperText: \"\",\n                fullWidth: true,\n                label: \"New Dependency\",\n                id: \"fb-new-dependency\",\n                type: \"text\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: addDependency,\n                className: classes.varEvButton,\n                size: \"small\",\n                variant: \"contained\",\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            className: `${classes.box} ${classes.dependenciesBox}`,\n            item: true,\n            children: fbExternalDependencies.length ? fbExternalDependencies.map((ed, index) => /*#__PURE__*/_jsxDEV(Chip, {\n              className: classes.dependency,\n              label: ed.edName,\n              onDelete: deleteDependency(ed)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 23\n            }, this)) : 'No Dependencies'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: true,\n        container: true,\n        direction: \"row\",\n        justify: \"space-between\",\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: changeImplFile,\n            value: \"\",\n            required: true,\n            accept: \".py\",\n            type: \"file\",\n            id: \"button-file\",\n            hidden: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"button-file\",\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.tfFile,\n              label: \"Implementation File\",\n              required: !((_props$byPassFields2 = props.byPassFields) === null || _props$byPassFields2 === void 0 ? void 0 : _props$byPassFields2.fbImplFile),\n              error: !validFile,\n              disabled: true,\n              value: fbImplFile.name,\n              InputProps: {\n                startAdornment: /*#__PURE__*/_jsxDEV(Box, {\n                  pb: 1,\n                  mr: 1,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    component: \"span\",\n                    children: /*#__PURE__*/_jsxDEV(UploadIcon, {\n                      className: classes.icon\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 27\n                }, this)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          container: true,\n          direction: \"row\",\n          spacing: 2,\n          alignItems: \"center\",\n          justify: \"flex-end\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onCancel,\n              color: \"secondary\",\n              variant: \"contained\",\n              children: [/*#__PURE__*/_jsxDEV(Clear, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 86\n              }, this), cancelLabel]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: confirmButtonAction,\n              color: \"primary\",\n              variant: \"contained\",\n              children: [/*#__PURE__*/_jsxDEV(Done, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 93\n              }, this), confirmLabel]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true);\n};\n\n_s(DigitalTwin, \"D2MCCpGXtTtTg8u3/AdHZ0gN6ak=\", false, function () {\n  return [useFunctionBlockStyles, useStore];\n});\n\n_c = DigitalTwin;\n\nvar _c;\n\n$RefreshReg$(_c, \"DigitalTwin\");","map":{"version":3,"sources":["/home/maria/Desktop/Marketplace-JurassicPark/backend/web/src/components/DigitalTwin/DigitalTwinForm.tsx"],"names":["React","useState","useCallback","FormControl","InputLabel","TextField","Grid","Select","MenuItem","Box","Button","Typography","Chip","InOutType","useFunctionBlockStyles","VariableList","setSimpleField","EventList","Done","Clear","ConfirmActionStateLabel","ConfirmAction","useStore","DigitalTwin","props","classes","data","functionBlockCategories","dispatchAction","dispatchFunctionBlockCategoriesActions","validCategory","setValidCategory","fbType","setFbType","validType","setValidType","onChangeFBType","event","target","value","trim","onCancel","cancel","action","cancelLabel","label","confirmLabel","confirmDialog","buttonTitle","confirm","setConfirm","validateFields","cValidType","cValidDescription","fbDescription","cValidGeneralCategory","fbGeneralCategory","cValidCategory","fbCategory","fbcId","cValidFile","byPassFields","fbImplFile","name","setValidDescription","setValidGeneralCategory","setValidFile","confirmButtonAction","confirmActionStates","start","positiveLabel","negativeLabel","state","executing","success","error","confirmActionProps","title","states","currentState","onError","onSuccess","onDropFiles","errorReadingFBT","file","err","msg","onChangeFBTFile","fbcName","setFbCategory","filter","cat","map","index","validGeneralCategory","changeGeneralCategory","generalCategoryNames","validDescription","setFbDescription","box","onInputVariableEdition","onInputVariableRemoval","setFbInputVariables","in","fbInputVariables","onOutputVariableEdition","onOutputVariableRemoval","setFbOutputVariables","out","fbOutputVariables","setInputEvent","removeInputEvent","addNewInputEvent","setFbInputEvents","newInputEvent","setNewInputEvent","fbInputEvents","setOutputEvent","removeOutputEvent","addNewOutputEvent","setFbOutputEvents","newOutputEvent","setNewOutputEvent","fbOutputEvents","onChangeCurrentDependency","currentDependency","addDependency","varEvButton","dependenciesBox","fbExternalDependencies","length","ed","dependency","edName","deleteDependency","changeImplFile","tfFile","validFile","startAdornment","icon"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport { FormControl, InputLabel, TextField, Grid, Select, MenuItem, Box, Button,Typography, Chip } from '@material-ui/core'\nimport { FBGeneralCategory, Variable, InOutType, Event, EventVariable, FunctionBlock, FBCategory, ExternalDependency } from '../../model'\nimport { useFunctionBlockStyles } from '../FunctionBlocks/FunctionBlock/style'\nimport { VariableList } from './Variable'\nimport { setSimpleField, useMountEffect } from '../../utils/main'\nimport { EventList } from './Event'\nimport { Done, Clear } from '@material-ui/icons'\nimport { ReactComponent as UploadIcon } from '../../../icons/Upload.svg'\nimport { getFBfromFbtFile, getOrDownloadFunctionBlockCategories } from '../../utils/functionBlock'\nimport { ConfirmActionProps, ConfirmActionStateLabel, ConfirmActionAction, ConfirmAction } from '../templates/ConfirmAction/ConfirmAction'\nimport { useStore } from '../templates/Store/Store'\nimport { FunctionBlockCategoriesActions } from '../../redux/actions'\n\ninterface DigitalTwinProps {\n\n    dtName: {\n        dtName: string\n        setDtName: Function\n    },\n    cancel: {\n        label: string\n        action: () => void\n    },\n    confirmDialog: {\n        buttonTitle: string\n        title: string\n        initialState: ConfirmActionStateLabel\n        action: ConfirmActionAction\n        onSuccess : () => void\n        start? : {\n            label: string\n            positiveLabel: string\n            negativeLabel: string\n        }\n        success: {\n            label:string\n            positiveLabel: string\n        }\n        error: {\n            label: string\n            positiveLabel: string\n        }\n    },\n}\n\nexport const DigitalTwin = (props: DigitalTwinProps) => {\n\n    /**styles */\n    const classes = useFunctionBlockStyles()\n\n    /**list of categories */\n    const {data: functionBlockCategories, dispatchAction:dispatchFunctionBlockCategoriesActions} = useStore('functionBlockCategories')\n\n    const [validCategory,setValidCategory] : [boolean, Function] = useState(true)\n\n    /**Fb type */\n    const {fbType, setFbType} = props.fbType\n    const [validType, setValidType] = useState(true)\n    const onChangeFBType = useCallback((event:any) => {\n\n        setFbType(event.target.value.trim())\n        setValidType(true)\n    \n      },[setFbType])\n\n    /* Buttons */\n\n    const onCancel = props.cancel.action\n    const cancelLabel = props.cancel.label\n\n    const confirmLabel = props.confirmDialog.buttonTitle\n\n    /* Confirmation */\n\n    const [confirm, setConfirm] : [boolean, Function] = useState(false)\n\n    const validateFields = () : boolean => {\n\n        const cValidType = fbType.trim() !== ''\n        const cValidDescription = fbDescription.trim() !== ''\n        const cValidGeneralCategory = !!fbGeneralCategory\n        const cValidCategory = fbCategory.fbcId !== -1\n        const cValidFile = !!props.byPassFields?.fbImplFile || fbImplFile.name !== ''  \n            \n        if(!cValidType) setValidType(cValidType)\n        if(!cValidDescription) setValidDescription(cValidDescription)\n        if(!cValidGeneralCategory) setValidGeneralCategory(cValidGeneralCategory)\n        if(!cValidCategory) setValidCategory(cValidCategory)\n        if(!cValidFile) setValidFile(cValidFile)\n    \n        return cValidType && cValidGeneralCategory && cValidCategory && cValidDescription && cValidFile\n    \n    }\n\n    const confirmButtonAction = () => {\n\n        if(validateFields())\n          setConfirm(true)\n    }\n\n    const confirmActionStates = {\n        start: {\n            label: props.confirmDialog.start?.label,\n            positiveLabel: props.confirmDialog.start?.positiveLabel,\n            negativeLabel: props.confirmDialog.start?.negativeLabel,\n            state: ConfirmActionStateLabel.start\n        },\n        executing: {\n          label: '',\n          state: ConfirmActionStateLabel.executing,\n        },\n        success: {\n          label: props.confirmDialog.success.label,\n          state: ConfirmActionStateLabel.success,\n          positiveLabel: props.confirmDialog.success.positiveLabel\n        },\n        error: {\n          label: props.confirmDialog.error.label,\n          state: ConfirmActionStateLabel.error,\n          positiveLabel: props.confirmDialog.success.positiveLabel\n        },\n      }\n    \n    const confirmActionProps : ConfirmActionProps = {\n\n        title: props.confirmDialog.title,\n        states: confirmActionStates,\n        currentState: confirmActionStates.executing,\n        onCancel: () => setConfirm(false),\n        onError: () => setConfirm(false),\n        onSuccess: props.confirmDialog.onSuccess,\n        action:props.confirmDialog.action,\n      \n    }\n\n    return (\n        <> {confirm ? <ConfirmAction {...confirmActionProps} /> : null}\n          <Grid onDrop={onDropFiles} spacing={2} container direction=\"column\" component=\"form\">\n            <Grid item container alignItems=\"center\" justify={errorReadingFBT.file ? 'space-between' : 'flex-end'} direction=\"row\">\n              {errorReadingFBT.file ?\n              <Grid item>\n                {errorReadingFBT.err ? <Typography color=\"error\">{errorReadingFBT.msg}</Typography> : <Done fontSize=\"small\" />}\n              </Grid>\n              : null}\n              <Grid item>\n                <input onChange={onChangeFBTFile} value=\"\" accept=\".xml,.fbt\" type=\"file\" id=\"raised-button-file\" hidden />\n                  <label htmlFor=\"raised-button-file\">\n                    <Button variant=\"outlined\" component=\"span\" size=\"small\">\n                      Choose fbt file for form auto completion\n                    </Button>\n                  </label> \n              </Grid>\n            </Grid>\n            <Grid spacing={1} justify=\"space-between\" item xs container direction=\"row\">\n              <Grid item xs={6}>\n                <TextField\n                  onChange={onChangeFBType} \n                  value={fbType}\n                  helperText=\"\"\n                  error={!validType} \n                  fullWidth required \n                  label=\"Type\" \n                  id=\"fb-type\" \n                  type=\"text\" />\n              </Grid>\n              <Grid item xs>\n                <FormControl fullWidth required>\n                  <InputLabel error={!validCategory} id=\"category-label\">Category</InputLabel>\n                  <>\n                    <Select\n                      error={!validCategory}\n                      labelId=\"category-label\"\n                      value={fbCategory.fbcName}\n                      onChange={(event) => {\n                        setValidCategory(true)\n                        setFbCategory(functionBlockCategories.filter((cat:FBCategory) => event.target.value === cat.fbcName)[0])\n                      }} \n                    >\n                      {functionBlockCategories.map((cat:FBCategory, index:number) => <MenuItem key={index} value={cat.fbcName}>{cat.fbcName}</MenuItem>)}\n                    </Select>\n                   \n                  </>\n                </FormControl>\n              </Grid>\n              <Grid item xs>\n                <FormControl fullWidth required>\n                  <InputLabel error={!validGeneralCategory} id=\"gen-category-label\">General Category</InputLabel>\n                  <Select\n                    error={!validGeneralCategory} \n                    labelId=\"gen-category-label\"\n                    value={fbGeneralCategory || ''}\n                    onChange={(event:any) => {\n                      setValidGeneralCategory(true)\n                      changeGeneralCategory(event.target.value)\n                    }}\n                  >\n                    {generalCategoryNames.map((cat:any, index:number) => <MenuItem key={index} value={cat}>{cat}</MenuItem>)}\n                  </Select>\n                </FormControl>\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              <TextField \n                helperText=\"\" \n                variant=\"standard\" \n                fullWidth \n                required \n                multiline \n                rowsMax=\"4\" \n                label=\"Description\" \n                id=\"description\" \n                type=\"text\"\n                error={!validDescription} \n                onChange={setSimpleField(setFbDescription, () => setValidDescription(true))} \n                value={fbDescription}/>\n            </Grid>\n            <Grid item xs>\n              Variables\n            </Grid>\n            <Grid container item xs>\n              <Grid className={classes.box} spacing={1} item container direction=\"row\">\n                <Grid item xs={6}>\n                  <VariableList onVariableEdition={onInputVariableEdition} onVariableRemoval={onInputVariableRemoval} setVariables={setFbInputVariables} inOutType={InOutType.in} title=\"Input\" variables={fbInputVariables} />\n                </Grid>\n                <Grid item xs={6}>\n                  <VariableList onVariableEdition={onOutputVariableEdition} onVariableRemoval={onOutputVariableRemoval} setVariables={setFbOutputVariables} inOutType={InOutType.out} title=\"Output\" variables={fbOutputVariables} />\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              Events\n            </Grid>\n            <Grid container item xs>\n              <Grid className={classes.box} spacing={1} item container direction=\"row\">\n                <Grid item xs={6}>\n                  <EventList setEvent={setInputEvent} removeEvent={removeInputEvent} addNewEvent={addNewInputEvent} setEvents={setFbInputEvents} newEvent={newInputEvent} setNewEvent={setNewInputEvent} variables={fbInputVariables} inOutType={InOutType.in} title=\"Input\" events={fbInputEvents} />\n                </Grid>\n                <Grid item xs={6}>\n                  <EventList setEvent={setOutputEvent} removeEvent={removeOutputEvent} addNewEvent={addNewOutputEvent} setEvents={setFbOutputEvents} newEvent={newOutputEvent} setNewEvent={setNewOutputEvent} variables={fbOutputVariables} inOutType={InOutType.out} title=\"Output\" events={fbOutputEvents} />\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              Dependencies\n            </Grid>\n            <Grid container xs item>\n              <Grid item container className={classes.box} alignItems=\"center\" justify=\"space-between\">\n                <Grid item container direction=\"row\" spacing={1} alignItems=\"flex-end\">\n                  <Grid item xs={6}>\n                    <TextField\n                        onChange={onChangeCurrentDependency} \n                        value={currentDependency}\n                        helperText=\"\"\n                        fullWidth \n                        label=\"New Dependency\" \n                        id=\"fb-new-dependency\" \n                        type=\"text\" />\n                  </Grid>\n                  <Grid item>\n                    <Button onClick={addDependency} className={classes.varEvButton} size=\"small\" variant=\"contained\">+</Button>\n                  </Grid>\n                </Grid>\n                <Grid container className={`${classes.box} ${classes.dependenciesBox}`} item>\n                  {fbExternalDependencies.length ?\n                    fbExternalDependencies.map((ed: ExternalDependency, index: number) => (\n                      <Chip key={index} className={classes.dependency} label={ed.edName} onDelete={deleteDependency(ed)} />\n                    )) : 'No Dependencies'\n                  }\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item xs container direction=\"row\" justify=\"space-between\" alignItems=\"center\"> \n              <Grid item xs={6}>\n                  <input onChange={changeImplFile} value=\"\" required accept=\".py\" type=\"file\" id=\"button-file\" hidden />\n                  <label htmlFor=\"button-file\">\n                    <TextField\n                      className={classes.tfFile}\n                      label=\"Implementation File\"\n                      required={!props.byPassFields?.fbImplFile}\n                      error={!validFile}\n                      disabled={true}\n                      value={fbImplFile.name} \n                      InputProps={{\n                        startAdornment: (\n                          <Box pb={1} mr={1}>\n                            <Button variant=\"outlined\" component=\"span\">\n                              <UploadIcon className={classes.icon} />\n                            </Button>\n                          </Box> \n                        )\n                      }} />\n                  </label>\n              </Grid>\n              <Grid item xs={6} container direction=\"row\" spacing={2} alignItems=\"center\" justify=\"flex-end\">\n                <Grid item>\n                    <Button onClick={onCancel} color=\"secondary\" variant=\"contained\"><Clear/>{cancelLabel}</Button>\n                </Grid>\n                <Grid>\n                  <Button onClick={confirmButtonAction} color=\"primary\" variant=\"contained\"><Done/>{confirmLabel}</Button>\n                </Grid>\n              </Grid>\n            </Grid>\n            \n          </Grid>\n        </>\n      )\n}"]},"metadata":{},"sourceType":"module"}